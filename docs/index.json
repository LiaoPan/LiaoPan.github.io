[
{
	"uri": "https://LiaoPan.github.io/dipy/basic/",
	"title": "å¿«é€Ÿå…¥é—¨",
	"tags": [],
	"description": "",
	"content": "å¿«é€Ÿå…¥é—¨ æœ¬æ•™ç¨‹çŸ¥è¯†ç‚¹ï¼š\nå¯¼å…¥å’Œä¿å­˜dMRIçš„NIfTIæ•°æ® ç»˜åˆ¶ä¸æŸ¥çœ‹dMRIå½±åƒæ•°æ® è¯»å–bvalå’Œbvecæ–‡ä»¶ Jupyterå·²çœç•¥éƒ¨åˆ†å†…å®¹ï¼Œè¯·ç‚¹å‡»è¿™é‡Œå…¨å±æ˜¾ç¤º "
},
{
	"uri": "https://LiaoPan.github.io/freesurfer/installation/",
	"title": "FreeSurferæ•™ç¨‹ #1. å®‰è£…",
	"tags": [],
	"description": "",
	"content": "å®‰è£…æ–¹æ³•ç®€è¿° æ ¹æ®è‡ªå·±ç³»ç»Ÿä¸‹è½½å¯¹åº”çš„å®‰è£…åŒ…ï¼ˆFreeSurfer 7.3.2 ~5Gï¼‰ é€šè¿‡ç½‘å€(https://surfer.nmr.mgh.harvard.edu/registration.html),è·å–license.txt,å°†å…¶æ”¾ç½®åœ¨FreeSuferçš„å®‰è£…ç›®å½•ä¸‹ã€‚ ä¾æ¬¡æ‰§è¡Œä¸‹è¿°è„šæœ¬ï¼Œè®¾ç½®ç¯å¢ƒå˜é‡,æ³¨æ„freesurferçš„ç‰ˆæœ¬7.3.2éœ€è¦æ›¿æ¢æˆè‡ªå·±å®‰è£…çš„ç‰ˆæœ¬ã€‚ shell $ export FREESURFER_HOME=/Applications/freesurfer/7.3.2 $ export SUBJECTS_DIR=$FREESURFER_HOME/subjects $ source $FREESURFER_HOME/SetUpFreeSurfer.sh -------- freesurfer-darwin-macOS-7.3.2-20200429-3a03ebd -------- Setting up environment for FreeSurfer/FS-FAST (and FSL) WARNING: /Users/synpro/freesurfer/fsfast does not exist FREESURFER_HOME /Applications/freesurfer/7.3.2 FSFAST_HOME /Users/synpro/freesurfer/fsfast FSF_OUTPUT_FORMAT nii.gz SUBJECTS_DIR /Applications/freesurfer/7.3.2/subjects MNI_DIR /Users/synpro/freesurfer/mni $ which freeview /Applications/freesurfer/7.3.2/bin/freeview æ³¨æ„ä¸Šè¿°æ–¹å¼æ—¶ä¸´æ—¶æœ‰æ•ˆï¼Œå³ä»…å¯¹å½“å‰æ‰“å¼€çš„ç»ˆç«¯æœ‰æ•ˆï¼Œå…³é—­è¯¥ç»ˆç«¯åï¼Œä¸Šè¿°è®¾ç½®éƒ½ä¼šå¤±æ•ˆã€‚\næ°¸ä¹…è®¾ç½®ç¯å¢ƒå˜é‡æ–¹æ³•ï¼š å°†ä¸Šè¿°è„šæœ¬å†™å…¥~/.bash_profileæ–‡ä»¶ä¸­,æ“ä½œå‘½ä»¤å¦‚ä¸‹ï¼š shell $ vi ~/.bash_profile #æ‰“å¼€è¯¥æ–‡æœ¬ï¼Œå†™å…¥å†…å®¹(è‹¥ä¸ç†Ÿæ‚‰vimï¼Œè¯·ä½¿ç”¨å…¶ä»–å·¥å…·æ‰“å¼€å³å¯); # FREESURFER export FREESURFER_HOME=/Applications/freesurfer/7.3.2 export SUBJECTS_DIR=$FREESURFER_HOME/subjects source $FREESURFER_HOME/SetUpFreeSurfer.sh $ source .bash_profile # è®©è®¾ç½®ç«‹å³ç”Ÿæ•ˆ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„è®¾ç½®é»˜è®¤ä½¿ç”¨bashï¼Œå¦‚æœä½ åœ¨Macä¸Šä½¿ç”¨çš„æ˜¯zshç­‰shellå·¥å…·ï¼Œéœ€è¦å†åšå¦‚ä¸‹é…ç½®ï¼Œæ¥è¾¾åˆ°ç¯å¢ƒå˜é‡è®¾ç½®çš„æ°¸ä¹…ç”Ÿæ•ˆã€‚\n1.$ vim ~/.zshrc\n2.åœ¨å¼€å¤´æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š\nif [ -f ~/.bash_profile ]; then source ~/.bash_profile fi 3.ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ä½¿ä¹‹ç«‹å³ç”Ÿæ•ˆ $ source ~/.zshrc\nä¹‹åï¼Œæ¯æ¬¡æ‰“å¼€æ–°ç»ˆç«¯éƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨å•¦ã€‚ä½†æ¯æ¬¡éƒ½è¾“å‡ºè¯¥ä¿¡æ¯å¤ªä¸‘äº†ï¼Œå¦‚å›¾:\nLast login: Sat Feb 4 17:38:25 on ttys012 -------- freesurfer-darwin-macOS-7.3.2-20220804-6354275 -------- Setting up environment for FreeSurfer/FS-FAST (and FSL) FREESURFER_HOME /Applications/freesurfer/7.3.2 FSFAST_HOME /Applications/freesurfer/7.3.2/fsfast FSF_OUTPUT_FORMAT nii.gz SUBJECTS_DIR /Applications/freesurfer/7.3.2/subjects MNI_DIR /Applications/freesurfer/7.3.2/mni é‚£æ€ä¹ˆå¯ä»¥éšè—æ‰ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼šæ‰“å¼€~/.bash_profileæ–‡ä»¶ï¼Œåˆ é™¤æˆ–è€…æ³¨é‡Šæ‰ source $FREESURFER_HOME/SetUpFreeSurfer.sh,ç„¶åå°†ä¸Šè¿°ç»ˆç«¯è¾“å‡ºæ¶ˆæ¯å’Œecho $PATHåçš„FreeSurferç›¸å…³ä¿¡æ¯ï¼Œæ”¹ä¸ºå¦‚ä¸‹æ ¼å¼ï¼Œå¹¶å†™å…¥.bash_profileæ–‡ä»¶ã€‚ ~/.bash_profile # FREESURFER export FREESURFER_HOME=/Applications/freesurfer/7.3.2 export SUBJECTS_DIR=$FREESURFER_HOME/subjects # source $FREESURFER_HOME/SetUpFreeSurfer.sh export PATH=/Applications/freesurfer/7.3.2/bin:/Applications/freesurfer/7.3.2/fsfast/bin:/Applications/freesurfer/7.3.2/mni/bin:$PATH export FSFAST_HOME=/Applications/freesurfer/7.3.2/fsfast export FSF_OUTPUT_FORMAT=nii.gz export SUBJECTS_DIR=/Applications/freesurfer/7.3.2/subjects export MNI_DIR=/Applications/freesurfer/7.3.2/mni å‚è€ƒ å®˜ç½‘å®‰è£…æŒ‡å¯¼ https://surfer.nmr.mgh.harvard.edu/fswiki//FS7_mac "
},
{
	"uri": "https://LiaoPan.github.io/mrtrix/basic/",
	"title": "MRtrix3æ•™ç¨‹ #1 å¿«é€Ÿå…¥é—¨",
	"tags": [],
	"description": "",
	"content": " ç›¸å…³çŸ¥è¯†ç‚¹ åŸºç¡€æ¦‚å¿µ 1. T1åƒä¸T2åƒ 2. ç™½è´¨çš„ç»“æ„ 3.æ‰©æ•£æ¢¯åº¦ï¼ˆDiffusion Gradientï¼‰ä¸Bå€¼ï¼ˆB-valueï¼‰ 4.Bå‘é‡ï¼ˆB-vectorsï¼‰ 5.å¼ é‡å»ºæ¨¡ 6.å…¶ä»–çš„æ‰©æ•£è¡¡é‡æŒ‡æ ‡ 7.æ‰©æ•£å¼ é‡æˆåƒçš„ç¼ºç‚¹ï¼šäº¤å‰çº¤ç»´é—®é¢˜ MRtrix Viewerä½¿ç”¨ BTC_preopï¼ˆBrain Tumor Connectomics Dataï¼‰æ•°æ®ä¸‹è½½ MRtrixæ•°æ®æ ¼å¼ä¸æ ¼å¼è½¬æ¢ æ£€æŸ¥Bvalså’ŒBvecs å­¦ä¹ å‚è€ƒ MRtrixæ˜¯ä¸€ä¸ªç”¨äºåˆ†ææ‰©æ•£æ•°æ®çš„è½¯ä»¶åŒ…ã€‚ä¸å¼ é‡æ‹ŸåˆæŠ€æœ¯ç›¸æ¯”ï¼ŒMRtrixçš„ä¸€ä¸ªæ˜¾è‘—ä¼˜åŠ¿æ˜¯ä»–ä»¬çš„çº¦æŸçƒå½¢è§£å·æ–¹æ³•ï¼Œæˆ–ç§°CSD(Constrained spherical deconvolution)ï¼›è¯¥æ–¹æ³•å°†æ¯ä¸ªä½“ç´ çš„æ‰©æ•£ä¿¡å·è§£å·ä¸ºä¸€ç³»åˆ—é‡å çš„çº¤ç»´æŸ,è¿™å°±å‡å°‘äº†åœ¨æ‹Ÿåˆå¼ é‡æ—¶å¯èƒ½å‡ºç°çš„çº¤ç»´äº¤å‰é—®é¢˜ã€‚\né™¤äº†MRtrixå›¢é˜Ÿåˆ›å»ºçš„å‘½ä»¤åº“ä¹‹å¤–ï¼Œè¯¥è½¯ä»¶å°è£…äº†FSLçš„éƒ¨åˆ†å‘½ä»¤ï¼šç‰¹åˆ«æ˜¯topupå’Œeddyè¿™ä¸¤ä¸ªå‘½ä»¤ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…FSLè½¯ä»¶ï¼Œè¯·ä¸‹è½½å¹¶å®‰è£…fMRIè½¯ä»¶åŒ…FSLã€‚\nç›¸å…³çŸ¥è¯†ç‚¹ å­¦ä¹ ä½¿ç”¨fixel-basedåˆ†ææ–¹æ³•æ¥é‡åŒ–æ¯ä¸ªä½“ç´ çš„ç™½è´¨çº¤ç»´å¯†åº¦ å­¦ä¹ æ€ä¹ˆä½¿ç”¨æ¦‚ç‡çº¤ç»´æŸæˆåƒåˆ›å»ºçº¤ç»´æŸå›¾ å­¦ä¹ å¦‚ä½•åˆ›å»ºè¿æ¥ä½“(connectomes)ä»¥åŠå¦‚ä½•å¯è§†åŒ–è¿æ¥ä¸åŒå¤§è„‘åŒºåŸŸçš„çº¤ç»´æ•°é‡ åŸºç¡€æ¦‚å¿µ 1. T1åƒä¸T2åƒ åœ¨T1æˆ–è§£å‰–æ‰«æä¸­ï¼Œç™½è´¨æ¯”ç°è´¨æµ…ï¼Œè€Œç°è´¨åˆæ¯”è„‘è„Šæ¶²æµ…ï¼›åœ¨T2æˆ–åŠŸèƒ½æ‰«æä¸­ï¼Œç›¸å¯¹å¼ºåº¦è¢«ç¿»è½¬ã€‚ å…¸å‹çš„T1åŠ æƒï¼ˆè§£å‰–ï¼‰å’Œ T2åŠ æƒï¼ˆåŠŸèƒ½ï¼‰å›¾åƒã€‚æ³¨æ„ä»T1åŠ æƒæˆåƒåˆ°T2åŠ æƒæˆåƒæ—¶ç»„ç»‡ç±»å‹çš„ç›¸å¯¹å¼ºåº¦æ˜¯å¦‚ä½•åè½¬çš„ã€‚\nç„¶è€Œï¼Œè¿˜æœ‰å…¶ä»–ç±»å‹çš„å›¾åƒå¯ä»¥é€šè¿‡MRIæ‰«æä»ªè·å¾—ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹è®¨è®ºæ‰©æ•£åŠ æƒæ ¸ç£å…±æŒ¯æˆåƒï¼Œæˆ–ç§°dMRIï¼Œå®ƒæµ‹é‡å¤§è„‘ä¸åŒéƒ¨ä½çš„ç›¸å¯¹æ‰©æ•£æ€§\u0026ndash;ç‰¹åˆ«æ˜¯åœ¨ç™½è´¨æŸå†…ã€‚\n2. ç™½è´¨çš„ç»“æ„ ä¸ºä»€ä¹ˆdMRIä¼šå…³æ³¨ç™½è´¨æŸï¼Ÿæƒ³è±¡ä¸€ä¸‹å‰¥å¼€ä¸€æ ¹å¥¶é…ªæ¡ï¼Œç„¶åæƒ³è±¡ä¸€ä¸‹å‰¥å¼€å¤§è„‘\u0026ndash;å°±åƒå¥¶é…ªæ¡ä¸€æ ·ï¼Œå¤§è„‘æœ‰é¦–é€‰çš„æ’•è£‚æ–¹å‘ã€‚è¿™äº›æ–¹å‘ä¸åº•å±‚ç™½è´¨æŸç›¸å¯¹åº”ï¼Œç™½è´¨æŸæ˜¯åšåšçš„æœ‰é«“ç¥ç»å…ƒæŸï¼ˆmyelinated neuronsï¼‰ï¼Œè¿æ¥ç€å¤§è„‘çš„é™„è¿‘å’Œé¥è¿œçš„éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œä¸‹çºµæŸ(inferior longitudinal fasciculus)è¿æ¥å¤§è„‘çš„è§†è§‰å’Œé¢éƒ¨åŒºåŸŸï¼Œè€Œé’©æŸ(uncinate fasciculus)åˆ™è¿æ¥å¤§è„‘çš„é¢éƒ¨å’Œä¸‹é¢éƒ¨ã€‚è¿™äº›ç¥ç»æŸæ²¿ç€å¤§è„‘çš„æ‰€æœ‰ä¸‰ä¸ªç»´åº¦è¡Œè¿›ï¼Œå®ƒä»¬å¯èƒ½ç›¸äº’å¹³è¡Œæˆ–ç›¸äº’äº¤å‰ã€‚\nIllustration of several main white matter tracts. Figure taken from Thiebaut et al., 2015. å¤§è„‘çš„ç™½è´¨å› å…¶é¢œè‰²è€Œå¾—åï¼›è¿™äº›ç¥ç»å…ƒæ˜¯é«˜åº¦é«“é˜åŒ–çš„ï¼Œè¿™æ„å‘³ç€å®ƒä»¬æœ‰ä¸€å±‚åšåšçš„è„‚è´¨æ¶‚å±‚ï¼Œæ—¢èƒ½ä½¿å®ƒä»¬ç»ç¼˜ï¼Œåˆæœ‰åŠ©äºç”µè„‰å†²çš„ä¼ è¾“ï¼Œå°±åƒç»ç¼˜çš„ç”µçº¿ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç°è´¨ç¥ç»å…ƒåˆ™ç›¸å¯¹æ²¡æœ‰é«“é˜ï¼Œè¿™ä½¿å¾—ç‰¹å®šåŒºåŸŸå†…çš„ç¥ç»å…ƒå¯†åº¦æ›´é«˜ã€‚\nå¦‚æœå¯¹Diffusionçš„å†å²æ„Ÿå…´è¶£ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹\n3.æ‰©æ•£æ¢¯åº¦ï¼ˆDiffusion Gradientï¼‰ä¸Bå€¼ï¼ˆB-valueï¼‰ æ‰©æ•£æ¢¯åº¦ç”±ä»¥ä¸‹å‚æ•°ç”Ÿæˆï¼š\nThe magnitude of diffusion gradient (G); The time between gradients (ğš«) ; T duration of diffusion gradient (ğœ¹). è¿™äº›å¯ä»¥ç»„åˆæˆä¸€ä¸ªæ–¹ç¨‹å¼ï¼Œå³æ‰€è°“çš„bå€¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ è¯·æ³¨æ„ï¼Œbå€¼ä¸æ¢¯åº¦çš„å¤§å°ã€æ¢¯åº¦çš„æŒç»­æ—¶é—´å’Œæ¢¯åº¦ä¹‹é—´çš„æ—¶é—´æˆæ­£æ¯”ï¼›å¦‚æœè¿™äº›å‚æ•°ä¸­çš„ä»»ä½•ä¸€ä¸ªå¢åŠ ï¼Œbå€¼ä¹Ÿä¼šéšä¹‹å¢åŠ ã€‚\nä¸‹å›¾æ‰€ç¤ºbå€¼ä¸º0çš„æ‰©æ•£åŠ æƒå›¾åƒä¸å…¸å‹çš„T2åŠ æƒå›¾åƒå‡ ä¹ç›¸åŒ\u0026ndash;è„‘è„Šæ¶²ï¼ˆCSFï¼‰æ˜¯äº®çš„ï¼Œç°è´¨æ˜¯æš—çš„ã€‚å½“æˆ‘ä»¬å¢åŠ bå€¼æ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°åœ¨å¤§è„‘çš„ç‰¹å®šéƒ¨ä½ï¼Œä¸»è¦æ˜¯ç™½è´¨å†…æœ‰æ›´å¤§çš„ä¿¡å·æŸå¤±ã€‚è¿™æ˜¯å› ä¸ºè¿™äº›ç™½è´¨æŸå†…çš„æ°´ä¸»è¦æ²¿ç€æŸçš„æ–¹å‘æ‰©æ•£ï¼Œç”Ÿæˆçš„å›¾åƒæ˜¾ç¤ºå‡ºç›¸åº”çš„ä½ä¿¡å·ã€‚(è¾ƒé«˜çš„bå€¼ä¹Ÿä½¿å›¾åƒæ›´å®¹æ˜“å—åˆ°å›¾åƒä¼ªå½±çš„å½±å“ï¼Œå¦‚è¿åŠ¨å’Œè¢«ç§°ä¸ºæ¶¡æµï¼ˆeddyï¼‰çš„ç£æµï¼‰ã€‚ è¾ƒé«˜çš„bå€¼å°†å¯¹æ£€æµ‹æ‰©æ•£æ›´æ•æ„Ÿï¼Œä½†å­˜åœ¨æ›´å¤šå™ªå£°å’Œæ›´æ˜“å—æŒ¯åŠ¨ä¼ªå½±å½±å“çš„é£é™©ã€‚\nä»¥ä¸€ä¸ªä»¥ä¸Šçš„bå€¼è·å–çš„æ‰©æ•£å›¾åƒè¢«ç§°ä¸ºå¤šå£³è·å–(multi-shell acquisitions)ã€‚è¿™å¯ä»¥å¯¹æ‰©æ•£çš„æ–¹å‘è¿›è¡Œæ›´ç²¾ç»†çš„åŒºåˆ†ã€‚å› ä¸ºæ ¹æ®æ‰©æ•£é‡ï¼Œå›¾åƒå°†åœ¨æ¯ä¸ª b å€¼å¤„æ˜¾ç¤ºä¸åŒé‡çš„ä¿¡å·æŸå¤±ã€‚\n4.Bå‘é‡ï¼ˆB-vectorsï¼‰ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¼šäº†å¦‚ä½•åº”ç”¨æ‰©æ•£æ¢¯åº¦ï¼Œä»¥åŠå¦‚ä½•è§£é‡Šå›¾åƒä¸­äº§ç”Ÿçš„ä¿¡å·ã€‚ä¸ºäº†å®Œå–„æˆ‘ä»¬å¯¹æ‰©æ•£å›¾åƒå¦‚ä½•äº§ç”Ÿçš„ç†è§£ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“åº”ç”¨æ¢¯åº¦çš„æ–¹å‘ã€‚è¿™äº›æ–¹å‘è¢«ç§°ä¸ºb-vectorsï¼Œæˆ–ç®€ç§°bvecsã€‚ä½ ä¼šæ³¨æ„åˆ°ï¼Œä¸€æ—¦ä¸‹è½½äº†æ‰©æ•£åŠ æƒæ‰«æçš„æ•°æ®ï¼Œä¼šæœ‰ä¸¤ä¸ªæ–‡æœ¬æ–‡ä»¶\u0026ndash;ä¸€ä¸ªé€šå¸¸æœ‰åç¼€**.bval**ï¼Œè¡¨ç¤ºbå€¼ï¼Œå¦ä¸€ä¸ªæœ‰åç¼€**.bvec**ï¼Œä»£è¡¨bå‘é‡ã€‚\nå‡è®¾æ”¶é›†äº†40å¼ æ‰©æ•£åŠ æƒå›¾åƒï¼Œä¸”ç¬¬ä¸€ä¸ªvolumeçš„bå€¼ä¸º0ï¼Œå…¶ä½™volumeçš„bå€¼ä¸º1000ã€‚bvalsæ–‡ä»¶å°†æœ‰40ä¸ªæ¡ç›®ï¼Œæ¯ä¸ªbvalå¯¹åº”äºæ‰©æ•£åŠ æƒå›¾åƒä¸­çš„ä¸€ä¸ªç‹¬ç«‹å®¹ç§¯ã€‚å¦ä¸€æ–¹é¢ï¼Œbvecsæ–‡ä»¶å°†æœ‰40ä¸ªä¸‰å…ƒç»„æ•°å­—ï¼Œè¡¨ç¤ºè¯¥volumeåœ¨Xã€Yå’ŒZæ–¹å‘çš„æ‰©æ•£æ¢¯åº¦æ–¹å‘ã€‚å¦‚æœæˆ‘ä»¬çŸ¥é“æ¢¯åº¦çš„æ–¹å‘å’Œå¤§å°ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä»è¿™äº›ä½“ç´ è·å¾—çš„ä¿¡å·çš„å˜åŒ–ï¼Œå¯¹æ²¿æ¢¯åº¦çš„æ‰©æ•£è¿›è¡Œæœ‰æ ¹æ®çš„çŒœæµ‹ã€‚\nB-valuesç¤ºä¾‹ B-vectorsç¤ºä¾‹ 0 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 1000 0 0 0.98807364702224 0.01873399689793 0.10248889029026 -0.60841137170791 0.11875726282596 0.83128935098648 0.8792484998703 0.29209038615226 0.97650814056396 -0.45731022953987 -0.26519000530242 -0.34403458237648 0.3694197833538 -0.5363900065422 0.69562232494354 0.79384189844131 -0.8140320777893 -0.15647158026695 -0.05976745858788 -0.8508283495903 0.54968833923339 -0.86733847856521 -0.96609008312225 0.33223336935043 0.17501354217529 -0.22683978080749 -0.78282612562179 -0.01112493406981 -0.23269833624363 0.91476505994796 -0.67205339670181 -0.23402217030525 0.4485667347908 0.18897378444671 0.94987839460372 -0.9148513674736 -0.44173404574394 -0.73895621299743 0.79589116573333 -0.57393205165863 0.60627329349517 0.05053876712918 -0.64032816886901 -0.00203162245452 -0.65047174692153 -0.05030425265431 0.52077239751815 -0.77435040473938 -0.46209508180618 -0.31149512529373 0.72376120090484 0.35057383775711 0.58841001987457 0.30768102407455 0.58442068099975 -0.43342873454093 0.60935580730438 0.21404276788234 -0.14940990507602 -0.08567165583372 -0.44128519296646 -0.42076206207275 0.77442812919616 0.26836225390434 -0.9886794090271 -0.01840304397046 -0.10154163837432 0.60881024599075 -0.11891078948974 -0.83279365301132 -0.87748628854751 -0.2911439538002 -0.97587263584137 0.45687541365623 0.2644036412239 0.34314483404159 -0.37085926532745 0.53519117832183 -0.69378554821014 -0.79480296373367 0.8121600151062 0.15640883147716 0.0600587055087 0.852090716362 -0.54919642210006 0.86885839700698 0.96635591983795 -0.33167579770088 -0.17399430274963 0.22716110944747 0.78298610448837 0.01114399824291 0.23385895788669 -0.91456174850463 0.6740972995758 0.23286212980747 -0.44666454195976 -0.18938872218132 -0.95080780982971 0.91358888149261 0.44201084971427 0.73829895257949 -0.79423487186431 0.5715285539627 -0.60760217905044 -0.05102515220642 0.63832122087478 0.00161422998644 0.65151822566986 0.05034917593002 -0.52154493331909 0.77315002679824 0.46328803896904 0.31260219216346 -0.72411864995956 -0.35144120454788 -0.58741247653961 -0.3066479563713 -0.58275157213211 0.43335115909576 -0.61113619804382 -0.21487313508987 0.15031689405441 0.08529827743768 0.43970343470573 0.42256951332092 -0.77373939752578 -0.26831793785095 0 0 -0.01852251589298 0.99980324506759 0.65190172195434 0.77669501304626 0.51643615961074 0.24059402942657 0.11685247719287 0.9260526895523 0.1235506683588 0.85478085279464 0.85505563020706 0.64182126522064 0.37680619955062 0.68586140871048 0.09719203412532 0.50450026988983 0.05807575210928 0.54915863275528 0.96547383069992 0.4169929921627 0.83072793483734 0.1662128418684 0.24979101121425 0.7805278301239 0.19109116494655 0.95903354883194 0.61787110567092 0.36186653375625 0.73179537057876 0.40054687857627 0.23983028531074 0.15332546830177 0.19694779813289 0.11983390152454 0.24672436714172 0.22436074912548 0.89713984727859 0.64289963245391 0.39663499593734 0.03941979259252 0.51400256156921 0.72016698122024 0.40433484315872 0.82592779397964 0.60496312379837 0.3299603164196 0.7809572815895 0.47501924633979 0.56527525186538 0.39308729767799 0.67895883321762 0.67152732610702 0.68220138549804 0.50802809000015 0.41673135757446 0.81480491161346 0.23104956746101 0.87857925891876 0.07421392202377 0.90127205848693 0.31627905368804 0.14664776623249 0.59513312578201 0.95450747013092 0.01850401610136 -0.99982780218124 -0.64990043640136 -0.7771503329277 -0.51860928535461 -0.24067203700542 -0.11694828420877 -0.92531460523605 -0.12353691458702 -0.85404860973358 -0.85365968942642 -0.6399946808815 -0.37781903147697 -0.68439275026321 -0.0959820151329 -0.50524860620498 -0.05786505714058 -0.5474424958229 -0.96439582109451 -0.41736420989036 -0.83053159713745 -0.16672849655151 -0.24981169402599 -0.77884089946746 -0.18985091149807 -0.95970767736435 -0.61819595098495 -0.36017289757728 -0.7332512140274 -0.40044379234314 -0.24039900302887 -0.15302035212516 -0.19559489190578 -0.12080664187669 -0.24619971215725 -0.22405302524566 -0.89700889587402 -0.64234739542007 -0.39595165848732 -0.03925511986017 -0.51513165235519 -0.72206115722656 -0.40336072444915 -0.82375878095626 -0.60597515106201 -0.33166021108627 -0.78185319900512 -0.47429451346397 -0.56685864925384 -0.39410242438316 -0.67933368682861 -0.67376309633255 -0.68098336458206 -0.50633686780929 -0.41543397307395 -0.81643337011337 -0.23181574046611 -0.87980186939239 -0.07386588305234 -0.9025894999504 -0.31557491421699 -0.14773198962211 -0.59484159946441 -0.95507723093032 0 0 -0.15286396443843 -0.00651476159691 0.75134563446044 -0.16303530335426 -0.84805089235305 -0.50107139348983 0.46180909872055 0.23897625505924 0.17654202878475 0.24539165198803 0.44559413194656 0.68535083532333 -0.849438726902 0.49181297421455 0.71180284023284 -0.33955046534538 0.57790917158126 0.82093930244445 0.25355103611946 -0.31969979405403 0.08794292062521 -0.4691452383995 -0.06537938863039 0.529525578022 0.96584397554397 -0.16970072686672 -0.07361198216676 0.93216359615325 -0.64056777954101 0.05260347947478 -0.7005894780159 0.96006506681442 0.87177950143814 -0.97464287281036 -0.19198505580425 0.33572205901145 -0.00334380893036 0.2015535980463 0.45742538571357 0.81795364618301 -0.60682290792465 -0.69195765256881 0.65306454896926 0.56377238035202 -0.45924523472786 -0.94265359640121 -0.34482169151306 0.41801697015762 -0.68332421779632 -0.86513191461563 -0.12322624027729 -0.65280097723007 0.43402189016342 0.80451220273971 0.69626688957214 -0.38500982522964 -0.75848639011383 -0.42694765329361 -0.98598629236221 -0.42469879984855 0.83978271484375 -0.89523947238922 0.21465709805488 -0.12998943030834 0.14889819920063 0.00240560458041 -0.75320565700531 0.15933430194854 0.84670227766037 0.49852964282035 -0.46512472629547 -0.24295699596405 -0.18003137409687 -0.248728454113 -0.44872692227363 -0.68750166893005 0.84836089611053 -0.49515345692634 -0.71375703811645 0.33617293834686 -0.58055818080902 -0.82209664583206 -0.25755333900451 0.31582978367805 -0.0927395671606 0.46614015102386 0.06124122068285 -0.53235149383544 -0.96627259254455 0.16540592908859 0.06904108822345 -0.93281900882721 0.63847684860229 -0.05675909668207 0.69842767715454 -0.96039575338363 -0.87305974960327 0.97444224357605 0.18801675736904 -0.33934590220451 -0.0012511643581 -0.20568051934242 -0.4608829319477 -0.81964272260665 0.60453200340271 0.68994504213333 -0.65562653541565 -0.56693822145462 0.45641887187957 0.94205439090728 0.34160876274108 -0.42105090618133 0.68120157718658 0.8642703294754 0.11898732185363 0.65002489089965 -0.43727365136146 -0.8059714436531 -0.69843780994415 0.38163256645202 0.75681847333908 0.42400258779525 0.9858745932579 0.42196735739708 -0.84087663888931 0.89420926570892 -0.21792398393154 0.12582926452159 0 ä½ å¯ä»¥æ§åˆ¶çš„ä¸€ä¸ªå‚æ•°æ˜¯ä½ æƒ³ç”¨æ¢¯åº¦æ‰«æçš„æ–¹å‘æ•°é‡ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æ‰«æè·å–64æˆ–128å¼ å›¾åƒï¼Œæ¯å¼ å›¾åƒçš„æ‰©æ•£æ¢¯åº¦ä»ä¸€ä¸ªç¨å¾®ä¸åŒçš„æ–¹å‘åº”ç”¨ã€‚æ›´å¤šçš„æ–¹å‘å¯¼è‡´äº†æ›´é«˜çš„è§’åº¦åˆ†è¾¨ç‡ï¼ˆangular resolutionï¼‰ï¼Œè¿™ä½¿ä½ å¯ä»¥å¯¹æ‰©æ•£çš„æ–¹å‘åšå‡ºæ›´ç²¾ç»†çš„ç©ºé—´åŒºåˆ†ã€‚ä¸ä»»ä½•æé«˜åˆ†è¾¨ç‡çš„ä¸œè¥¿ä¸€æ ·ï¼Œå…¶ä»£ä»·æ˜¯æ›´å¤šçš„æ‰«æéœ€è¦æ›´å¤šçš„æ—¶é—´ã€‚\n5.å¼ é‡å»ºæ¨¡ è¿™ç§bvalså’Œbvecsçš„ç»„åˆä½¿æˆ‘ä»¬èƒ½å¤Ÿæ„å»ºä¸€ä¸ªç§°ä¸ºå¼ é‡ï¼ˆTensorï¼‰çš„ä¸œè¥¿ï¼Œå¹¶å°†å…¶ä¸æ‰©æ•£åŠ æƒå›¾åƒçš„æ¯ä¸ªä½“ç´ ç›¸åŒ¹é…ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œå¯ä»¥æŠŠå¼ é‡çœ‹ä½œæ˜¯æ²¿xã€yå’Œzç»´åº¦æ¨åŠ¨çš„åŠ›çš„æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œæµç»èŠ±å›­æ°´ç®¡çš„æ°´ä¼šå¯¹ç®¡å­çš„è¾¹ç•Œäº§ç”Ÿæ¨åŠ›ï¼Œä½†ä¸»è¦æ˜¯æ²¿ç€æ°´ç®¡çš„é•¿åº¦æµåŠ¨ã€‚æˆ‘ä»¬æŠŠèƒ½é‡çš„æ–¹å‘ç§°ä¸ºeigenvectorsï¼Œç‰¹å¾å‘é‡å’Œèƒ½é‡çš„å¤§å°ç§°ä¸ºeigenvalues,ç‰¹å¾å€¼ã€‚\nåº”ç”¨äºæ‰©æ•£åŠ æƒå›¾åƒï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›ç›¸åŒçš„æ¦‚å¿µï¼Œå°†æ¯ä¸ªä½“ç´ è§‚å¯Ÿåˆ°çš„ä¿¡å·å»ºæ¨¡ä¸ºç‰¹å¾å‘é‡å’Œç‰¹å¾å€¼çš„ç»„åˆã€‚ç‰¹å¾å‘é‡è¡¨ç¤ºæ‰©æ•£çš„æ–¹å‘ï¼Œè€Œç‰¹å¾å€¼ä»£è¡¨æ‰©æ•£çš„å¤§å°ã€‚å†ä¸¾èŠ±å›­æ°´ç®¡çš„ä¾‹å­ï¼Œæ°´çš„åŠ›é‡æ²¿ç€ç®¡å­çš„é•¿åº¦ä¼šæœ‰å¾ˆé«˜çš„ç‰¹å¾å‘é‡å’Œç‰¹å¾å€¼ï¼›åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå¤§è„‘ä¸­æ¯ä¸ªä½“ç´ çš„æ‰©æ•£å»ºæ¨¡ä¸ºç‰¹å¾å‘é‡å’Œç‰¹å¾å€¼çš„ç»„åˆã€‚ä¸€æ—¦æˆ‘ä»¬è®¡ç®—å‡ºæœ€èƒ½ä»£è¡¨å½“å‰ä½“ç´ ä¸­è§‚å¯Ÿåˆ°çš„ä¿¡å·çš„æ•°å€¼ç»„åˆï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸€äº›ä¸åŒçš„æ–¹ç¨‹æ¥è®¡ç®—è¯¥ä½“ç´ å¤„çš„æ‰©æ•£çš„ä¸åŒå±æ€§ã€‚è¿™ç§å¼¥æ•£å¼ é‡æˆåƒçš„æœ€æµè¡Œçš„æ–¹ç¨‹å¼è¢«ç§°ä¸ºåˆ†æ•°å„å‘å¼‚æ€§ï¼ˆFAï¼ŒFractional Anisotropyï¼‰ï¼Œæˆ–ç®€ç§°ä¸ºFAã€‚è¿™å¯ä»¥ç”¨å…¬å¼æ¥è®¡ç®—ï¼š å„å‘å¼‚æ€§æ˜¯æ¯ä¸ªä½“ç´ çš„ç‰¹å¾å€¼çš„åŠ æƒå’Œã€‚FAå€¼è¶Šé«˜ï¼Œè¯´æ˜æ²¿æŸä¸€æ–¹å‘çš„æ‰©æ•£è¶Šå¤§ï¼ŒFAå€¼è¶Šä½ï¼Œè¯´æ˜æ‰©æ•£å¾ˆå°‘ï¼Œæˆ–è€…æ‰©æ•£ä¸å—çº¦æŸï¼Œéšæ„å‘å„ä¸ªæ–¹å‘æ‰©æ•£ï¼ˆæ¯”å¦‚è¯´ï¼Œåœ¨è„‘å®¤ï¼‰ã€‚å¦‚æœæˆ‘ä»¬å‘ç°æ²¿å…¶ä¸­ä¸€ä¸ªç»´åº¦çš„æ‰©æ•£è¾ƒå¤§ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ–¹å‘è¿›è¡Œé¢œè‰²ç¼–ç ã€‚**æ‰©æ•£æˆåƒçš„æƒ¯ä¾‹æ˜¯ç”¨çº¢è‰²è¡¨ç¤ºæ²¿Xè½´çš„æ‰©æ•£ï¼Œç»¿è‰²è¡¨ç¤ºæ²¿Yè½´çš„æ‰©æ•£ï¼Œè“è‰²è¡¨ç¤ºæ²¿Zè½´çš„æ‰©æ•£ã€‚**ä¸‹é¢çš„å›¾ç‰‡æ€»ç»“äº†è¿™ä¸ªé¢œè‰²ç¼–ç æ–¹æ¡ˆã€‚ åœ¨æ¯ä¸ªä½“ç´ ä¸Šæ‹Ÿåˆä¸€ä¸ªå¼ é‡ï¼Œå¯ä»¥ç”Ÿæˆä¸åŒç±»å‹çš„æ‰©æ•£å›¾ï¼Œå¦‚å„å‘å¼‚æ€§å›¾ã€‚Tract-Based Spatial Statistics (TBSS)æ˜¯ä¸€ä¸ªæµè¡Œçš„FSLæ‰©æ•£åˆ†æè½¯ä»¶åŒ…ï¼Œå¯ç”¨äºåˆ›å»ºè¿™äº›åœ°å›¾ï¼›ç±»ä¼¼äºfMRIæ•°æ®çš„åˆ†æï¼Œè¿™äº›åœ°å›¾å¯è¢«ç»„åˆæˆä¸€ä¸ªç»„åˆ†æåœ°å›¾ï¼Œå¹¶å¯ä»åœ°å›¾ä¸­çš„æ„Ÿå…´è¶£åŒºåŸŸæå–æ•°æ®ã€‚ FSLçš„TBSSç”Ÿæˆçš„å¼ é‡ã€‚æœ‰å…³å¦‚ä½•ä½¿ç”¨æ­¤åŒ…åˆ†æä¸»é¢˜çš„æ¦‚è¿°.\n6.å…¶ä»–çš„æ‰©æ•£è¡¡é‡æŒ‡æ ‡ è™½ç„¶FAæ˜¯æœ€æµè¡Œçš„æ‰©æ•£è¡¡é‡æŒ‡æ ‡ï¼Œä½†æˆ‘ä»¬å°†ç®€è¦å›é¡¾ä¸€ä¸‹å…¶ä»–ä¸€äº›è¡¡é‡æŒ‡æ ‡ï¼š\nå¹³å‡æ‰©æ•£ç‡ (Mean Diffusivity,MD)ï¼šç‰¹å¾å€¼çš„å¹³å‡å€¼ï¼Œé€šè¿‡å°†ç‰¹å¾å€¼ç›¸åŠ å¹¶é™¤ä»¥3æ¥è®¡ç®—ã€‚å¯ç”¨äºè¯†åˆ«å¤§è„‘ç—…å˜ï¼Œä¾‹å¦‚æ°´è‚¿ã€‚ è½´å‘æ‰©æ•£ç³»æ•° (Axial Diffusivity,AD)ï¼šæœ€å¤§ç‰¹å¾å€¼çš„å€¼ã€‚ å¾„å‘æ‰©æ•£ç‡ (Radial Diffusivity,RD)ï¼šä¸¤ä¸ªæœ€å°ç‰¹å¾å€¼çš„å¹³å‡å€¼ã€‚é€šå¸¸ç”¨äºåˆ†ææœå‘ç›¸åŒæ–¹å‘çš„å¤§çº¤ç»´æŸï¼Œä¾‹å¦‚èƒ¼èƒä½“ã€‚ 7.æ‰©æ•£å¼ é‡æˆåƒçš„ç¼ºç‚¹ï¼šäº¤å‰çº¤ç»´é—®é¢˜ å°½ç®¡è‡ªæ‰©æ•£åŠ æƒæˆåƒå¼€å§‹ä»¥æ¥ï¼Œæ‰©æ•£å¼ é‡æˆåƒä¸€ç›´æ˜¯æœ€å—æ¬¢è¿çš„åˆ†ææ–¹æ³•ä¹‹ä¸€ï¼Œä½†å®ƒä¸€ç›´å—åˆ°äº¤å‰çº¤ç»´é—®é¢˜çš„é˜»ç¢ã€‚ä¸Šè¿°å¼ é‡æ‹Ÿåˆæ–¹æ³•å¯¹åˆ†æåªåŒ…å«å•ä¸€æ–¹å‘çš„ç™½è´¨æŸçš„ä½“ç´ å¾ˆæœ‰ç”¨ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½“ç´ å«æœ‰ç›¸äº’äº¤å‰çš„çº¤ç»´ï¼Œè¯¥æ–¹æ³•ä¼šå¯¼è‡´è™šå‡çš„ç»“æœã€‚ä¸¾ä¸ªæœ€æç«¯çš„ä¾‹å­ï¼Œè®¾æƒ³æˆ‘ä»¬è·å¾—äº†ä¸€ä¸ªå•ä¸€ä½“ç´ çš„å¼¥æ•£åŠ æƒå›¾åƒï¼Œè¿™ä¸ªä½“ç´ åŒ…å«ç›¸äº’æˆç›´è§’äº¤å‰çš„ç™½è´¨çº¤ç»´ã€‚ç”±äºå¼ é‡è¢«é™åˆ¶åœ¨ç”Ÿæˆä¸€ä¸ªå•ä¸€çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥ä¼°è®¡å…¶æ‰€æœ‰çš„ç‰¹å¾å‘é‡å’Œç‰¹å¾å€¼ï¼Œå®ƒæ— æ³•å•ç‹¬ä¼°è®¡æ¯æŸçº¤ç»´çš„æ‰©æ•£æ–¹å‘å’Œå¹…åº¦ã€‚ç›¸åï¼Œå®ƒå°†åˆ†å‰²å·®å¼‚å¹¶å¾—å‡ºç»“è®ºï¼Œæ²¿ä»»ä½•æ–¹å‘éƒ½æ²¡æœ‰æ‰©æ•£\u0026ndash;æ¢å¥è¯è¯´ï¼Œä¸¤ä¸ªçº¤ç»´æŸçš„æ‰©æ•£å°†ç›¸äº’æŠµæ¶ˆã€‚\nç™½è´¨çº¤ç»´ä»¥ç›´è§’ç›¸äº’äº¤å‰çš„ç¤ºæ„å›¾ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œäººä»¬å¼€å‘äº†ä¸€ç§è¢«ç§°ä¸ºçƒå½¢åå·ç§¯ï¼ˆSpherical Deconvolutionï¼‰çš„æŠ€æœ¯ã€‚çƒå½¢åå·ç§¯ä¸æ˜¯è¯•å›¾ä¸ºåœ¨æ¯ä¸ªä½“ç´ æµ‹é‡çš„å¤æ‚ä¿¡å·æ‰¾åˆ°ä¸€ä¸ªå•ä¸€çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯å‡è®¾æ‰©æ•£ä¿¡å·æ˜¯ä½ æœŸæœ›ä»å¤šä¸ªå•ç‹¬çš„çº¤ç»´åœ¨ä¸åŒè§’åº¦ç›¸äº’äº¤å‰çš„ä¿¡å·çš„å¹³å‡å€¼ã€‚å› æ­¤ï¼Œå•æ ¹çº¤ç»´è¢«ç”¨ä½œåŸºç¡€å‡½æ•°æ¥è§£å·æ›´å¤æ‚çš„ä¿¡å·ã€‚\næ‰©æ•£åŠ æƒæ•°æ®ä»è®¸å¤šä¸åŒçš„è§’åº¦è·å–æ¯ä¸ªä½“ç´ çš„æ‰©æ•£ä¿¡å·ï¼Œä»¥å½¢æˆæ‰©æ•£æ–¹å‘å’Œæ‰©æ•£å¹…åº¦çš„å›¾åƒã€‚ç„¶åï¼Œä¿¡å·è¢«è§£æ„ä¸ºä¸€ç»„åœ¨ä¸åŒæ–¹å‘ä¸Šçš„å•ä¸ªçº¤ç»´ã€‚çƒå½¢åå·ç§¯ä»£æ›¿äº†æ¯ä¸ªä½“ç´ çš„å•ä¸€æ‰©æ•£æ•°ï¼Œç”¨äºç”Ÿæˆçº¤ç»´å–å‘å¯†åº¦å‡½æ•°ï¼Œæˆ–FODï¼ˆFiber Orientation Density functionï¼‰ã€‚è¯¥å‡½æ•°è¢«è¡¨ç¤ºä¸ºä¸€ä¸ªå…·æœ‰åµå½¢è½´çš„å½¢çŠ¶ï¼›å°½ç®¡åŠ è½½åˆ°ä¸»è¦æ‰©æ•£æ–¹å‘çš„è½´çš„è£‚ç‰‡ç›¸å¯¹äºå…¶ä»–è½´å˜å¾—æ›´é•¿ã€æ›´å¤§ï¼Œä½†å…³äºæ²¿å…¶ä»–è½´çš„æ‰©æ•£æ–¹å‘å’Œå¼ºåº¦çš„ä¿¡æ¯ä»ç„¶è¢«ä¿ç•™ã€‚ å›¾ä¸­æ˜¯ä¸€ä¸ªæ‰©æ•£åŠ æƒå›¾åƒï¼Œä¸Šé¢è¦†ç›–ç€FODsã€‚å¦‚æœæˆ‘ä»¬æ”¾å¤§å‰è”åˆçš„ä¸€ä¸ªåŒºåŸŸï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ODFsä¸»è¦æ˜¯ç”±å·¦è‡³å³ï¼ˆè¿™ä¹Ÿç”±å®ƒä»¬çš„çº¢è‰²ç¼–ç æ¥è¡¨ç¤ºï¼‰ã€‚è¯·æ³¨æ„ï¼Œæ’å›¾å³è¾¹çš„ODFså¼€å§‹å˜æˆæ›´å¤šçš„ç»¿è‰²ï¼Œä»£è¡¨ç€æ–¹å‘ä»ä¸»è¦çš„å·¦å³è½´è½¬ä¸ºå‰åè½´ã€‚ å¦ä¸€éƒ¨åˆ†ç™½è´¨æ˜¾ç¤ºçš„FODsä¸»è¦éµå¾ªå‰åæ–¹å‘ï¼›ç„¶è€Œï¼Œä¸€äº›ODFsæœ‰åœ¨å‰åæ–¹å‘å’Œä¸‹è‡³ä¸Šæ–¹å‘å»¶ä¼¸çš„è£‚ç‰‡ï¼ˆä¸‹è‡³ä¸Šæ–¹å‘çš„é¢œè‰²è¢«ç¼–ç ä¸ºè“è‰²ï¼‰ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒFODså¯ä»¥ä»£è¡¨çº¤ç»´æ²¿å¤šä¸ªç»´åº¦çš„æ–¹å‘ã€‚ MRtrix Viewerä½¿ç”¨ å®‰è£…å¥½mrtrixåï¼Œåœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤mrviewï¼Œå³å¯æ‰“å¼€MRtrix Viewerå¯¹æ‰©æ•£åƒæ•°æ®è¿›è¡Œå¯è§†åŒ–æŸ¥çœ‹ï¼Œç‚¹å‡»UIç•Œé¢ä¸Šçš„File -\u0026gt; Open,é€‰æ‹©æƒ³è¦æŸ¥çœ‹çš„æ‰©æ•£åƒæ•°æ®ï¼Œå°±å¯ä»¥æŸ¥çœ‹æ‰©æ•£åƒæ•°æ®ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥å°†æ–‡ä»¶æ‹–æ‹½åˆ°UIè§†çª—ï¼Œç›´æ¥æ‰“å¼€æ‰©æ•£åƒæ•°æ®ã€ç»“æ„åƒæ•°æ®ã€‚åŒæ—¶ï¼Œå¯ä»¥é€‰æ‹©View -\u0026gt; Ortho viewä¸‹çš„é€‰é¡¹ï¼Œè°ƒæ•´ä¸ºä¸‰è§†å›¾æ¨¡å¼ã€‚ æˆ–è€…ï¼Œä½¿ç”¨ç»ˆç«¯æ–¹å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æŸ¥çœ‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n$ mrview \u0026lt;*.mif\u0026gt; $ mrview \u0026lt;*.mif\u0026gt; -overlay.load \u0026lt;*.mif\u0026gt; MRtrix Vieweré»˜è®¤æ˜¾ç¤ºçš„ç¬¬ä¸€ä¸ªä½“ç§¯ï¼Œå…¶æ—¶é—´åºåˆ—ç´¢å¼•ä¸º0ï¼Œå³çœ‹èµ·æ¥åƒå…¸å‹çš„ T2 åŠ æƒåŠŸèƒ½å›¾åƒ.ï¼ˆ0 è¡¨ç¤ºæ—¶é—´åºåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªä½“ç§¯ï¼Œ1 è¡¨ç¤ºç¬¬äºŒä¸ªä½“ç§¯ï¼Œä¾æ­¤ç±»æ¨ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©Image -\u0026gt; Next volumeæˆ–è€…Image -\u0026gt; Go to volumeè·³è½¬åˆ°ä¸åŒçš„volumeï¼›è§†çª—çš„å·¦ä¸‹è§’voxel indexä¸­æœ€åä¸€ä½ï¼Œå±•ç¤ºäº†å½“å‰æ‰€åœ¨çš„volumeæ˜¯å“ªä¸ªã€‚ å¦‚æœä½ å‘ç°å¼ºåº¦çš„ä¸‹é™ä½¿å›¾åƒå¤ªæš—è€Œçœ‹ä¸æ¸…ï¼Œä½ å¯ä»¥é€šè¿‡ç‚¹å‡»Tool -\u0026gt; View optionsé€‰é¡¹æ¥å¢åŠ äº®åº¦ï¼Œç„¶åä¸ºIntensity scalingæ è¾“å…¥ä¸€ä¸ªè¾ƒä½çš„æœ€å¤§å€¼ã€‚ BTC_preopï¼ˆBrain Tumor Connectomics Dataï¼‰æ•°æ®ä¸‹è½½ æˆ‘ä»¬å°†åˆ†ææ¥è‡ªopenneuro.orgçš„ä¸€ä¸ªåä¸ºBTC preop çš„æ•°æ®é›†ã€‚ è¯·ç‚¹å‡»å‰å¾€ç›¸å…³ç½‘ç«™è¿›è¡Œæ•°æ®ä¸‹è½½ã€‚ æ•°æ®é›†ä¸­åŒ…æ‹¬11åç¥ç»èƒ¶è´¨ç˜¤æ‚£è€…ã€14åè„‘è†œç˜¤æ‚£è€…å’Œ11åå¯¹ç…§å—è¯•è€…çš„æœ¯å‰æ•°æ®åœ¨è®ºæ–‡\u0026quot;Modeling brain dynamics in brain tumor patients using The Virtual Brain\u0026quot;ä½¿ç”¨ã€‚\nMRtrixæ•°æ®æ ¼å¼ä¸æ ¼å¼è½¬æ¢ MRtrixä½¿ç”¨å®ƒè‡ªå·±çš„æ ¼å¼(.mif)æ¥å­˜å‚¨å’Œæ˜¾ç¤ºæˆåƒæ•°æ®ã€‚å¦‚æœä½ å·²ç»ä½¿ç”¨è¿‡æµè¡Œçš„fMRIè½¯ä»¶åŒ…çš„æ•™ç¨‹ï¼Œå¦‚SPMã€FSLå’ŒAFNIï¼Œä½ å¯èƒ½è®°å¾—å®ƒä»¬éƒ½å¯ä»¥è¯»å–å’Œå†™å…¥NIFTIæ ¼å¼çš„å›¾åƒã€‚(AFNIé»˜è®¤ä¼šä»¥å®ƒè‡ªå·±çš„BRIK/HEADæ ¼å¼å†™æ–‡ä»¶ï¼Œé™¤éä½ æŒ‡å®šä½ çš„è¾“å‡ºåº”è¯¥æœ‰ä¸€ä¸ª.niiæ‰©å±•åï¼Œä½†å®ƒæ˜¯å”¯ä¸€çš„ä¾‹å¤–)ã€‚MRtrixä¹Ÿèƒ½è¯»å–NIFTIæ ¼å¼çš„åŸå§‹æ•°æ®ï¼Œä½†ä¼šä»¥MRtrixæ ¼å¼è¾“å‡ºæ–‡ä»¶ï¼Œæ ‡æœ‰.mifæ‰©å±•åã€‚\nè¦çœ‹è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè¯·å¯¼èˆªåˆ°åŒ…å«dwiæ•°æ®çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œå…¶ä¸­åŒ…å«ä½ çš„æ‰©æ•£æ•°æ®ã€‚é¢„å¤„ç†æ•°æ®çš„ç¬¬ä¸€æ­¥æ˜¯å°†æ‰©æ•£æ•°æ®è½¬æ¢ä¸ºMRtrixèƒ½ç†è§£çš„æ ¼å¼ï¼›æˆ‘ä»¬å°†ä½¿ç”¨mrconvertå‘½ä»¤å°†åŸå§‹æ‰©æ•£æ•°æ®ä¸ç›¸åº”çš„.bvalå’Œ.bvecæ–‡ä»¶ç»“åˆèµ·æ¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°†åˆå¹¶çš„æ–‡ä»¶ç”¨äºæœªæ¥çš„é¢„å¤„ç†æ­¥éª¤ã€‚\n# mrconvert -h æŸ¥çœ‹ä½¿ç”¨è¯´æ˜ # æ³¨æ„mrconvertå¯ä»¥å°†mifä¸niiä¹‹é—´äº’ç›¸è½¬æ¢ã€‚ $ mrconvert -h MRtrix 3.0.4 mrconvert Dec 14 2022 mrconvert: part of the MRtrix3 package SYNOPSIS Perform conversion between different file types and optionally extract a subset of the input image USAGE mrconvert [ options ] input output input the input image. output the output image. ... -fslgrad bvecs bvals Provide the diffusion-weighted gradient scheme used in the acquisition in FSL bvecs/bvals format files. If a diffusion gradient scheme is present in the input image header, the data provided with this option will be instead used. ... # å°†åŸå§‹æ‰©æ•£æ•°æ®ä¸ç›¸åº”çš„`.bval`å’Œ`.bvec`æ–‡ä»¶ç»“åˆèµ·æ¥ # mrconvert \u0026lt;input nifti\u0026gt; \u0026lt;output mif\u0026gt; -fslgrad \u0026lt;bvecs\u0026gt; \u0026lt;bvals\u0026gt; $ mrconvert sub-CON02_ses-preop_acq-AP_dwi.nii.gz sub-CON02_ses-preop_acq-AP_dwi.mif -fslgrad sub-CON02_ses-preop_acq-AP_dwi.bvec sub-CON02_ses-preop_acq-AP_dwi.bval # mrinfo \u0026lt;mif file\u0026gt; # å¿«é€ŸæŸ¥çœ‹mifæ•°æ®çš„ä¿¡æ¯ # è¾“å‡ºåŒ…å«ä¾‹å¦‚æ•°æ®é›†çš„ç»´åº¦å’Œä½“ç´ å¤§å°ï¼Œä»¥åŠç”¨äºç”Ÿæˆå½“å‰æ–‡ä»¶çš„å‘½ä»¤ï¼› $ mrinfo sub-CON02_ses-preop_acq-AP_dwi.mif ************************************************ Image name: \u0026#34;sub-CON02_ses-preop_acq-AP_dwi.mif\u0026#34; ************************************************ Dimensions: 96 x 96 x 60 x 102 Voxel size: 2.5 x 2.5 x 2.5 x 8.7 Data strides: [ -1 2 3 4 ] Format: MRtrix Data type: signed 16 bit integer (little endian) Intensity scaling: offset = 0, multiplier = 1 Transform: 0.9988 -0.01395 0.04747 -111 0.02082 0.9888 -0.1476 -85.88 -0.04488 0.1484 0.9879 -56.76 command_history: mrconvert sub-CON02_ses-preop_acq-AP_dwi.nii.gz sub-CON02_ses-preop_acq-AP_dwi.mif -fslgrad sub-CON02_ses-preop_acq-AP_dwi.bvec sub-CON02_ses-preop_acq-AP_dwi.bval (version=3.0.4) comments: TE=1.1e+02;Time=125448.950;phase=1;dwell=0.380 dw_scheme: 0,0,0,0 [102 entries] 0,0,0,0 ... 0.9082055818,0.3669468842,-0.201277434,2800 0,0,0,0 mrtrix_version: 3.0.4 è¯·æ³¨æ„ï¼Œç”±äºè¿™æ˜¯ä¸€ä¸ªå››ç»´æ•°æ®é›†(96 x 96 x 60 x 102)ï¼Œæœ€åä¸€ä¸ªç»´åº¦æ˜¯æ—¶é—´ï¼›æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«102ä¸ªä½“ç§¯(volumes)ï¼Œæ¯ä¸ªä½“ç§¯çš„å°ºå¯¸æ˜¯96 x 96 x 60ä½“ç´ ã€‚ä½“ç´ å¤§å°(Voxel size)å­—æ®µçš„æœ€åä¸€ä¸ªç»´åº¦å€¼ä¸º8.7,è¡¨ç¤ºè·å–æ¯ä¸ªä½“ç´ çš„æ—¶é—´ã€‚è¿™ä¸ªæ—¶é—´ä¹Ÿè¢«ç§°ä¸ºé‡å¤æ—¶é—´(repetition time)ï¼Œæˆ–TRã€‚\næ£€æŸ¥Bvalså’ŒBvecs æˆ‘ä»¬éœ€è¦æ£€æŸ¥çš„å…¶ä»–æ–‡ä»¶æ˜¯bvalså’Œbvecsæ–‡ä»¶ã€‚(ç®€è€Œè¨€ä¹‹ï¼Œbvalsæ–‡ä»¶åŒ…å«äº†æ¯ä¸ªå®¹ç§¯çš„ä¸€ä¸ªæ•°å­—ï¼Œè¡¨æ˜åº”ç”¨äºæ•°æ®çš„æ‰©æ•£æ¢¯åº¦æœ‰å¤šå¤§ï¼›bvecsæ–‡ä»¶åŒ…å«äº†æ¯ä¸ªå®¹ç§¯çš„ä¸‰ç»„æ•°å­—ï¼Œè¡¨æ˜åº”ç”¨æ¢¯åº¦çš„æ–¹å‘æ˜¯ä»€ä¹ˆã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå…·æœ‰è¾ƒå¤§bå€¼çš„ä½“ç§¯å¯¹æ‰©æ•£å˜åŒ–æ›´æ•æ„Ÿï¼Œä½†å›¾åƒä¹Ÿæ›´å®¹æ˜“å—åˆ°è¿åŠ¨å’Œç”Ÿç†ä¼ªå½±çš„å½±å“ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ä¸‰ä¸ªå…·æœ‰ä¸åŒbå€¼çš„å®¹ç§¯ã€‚bå€¼ä¸º0ç›¸å½“äºT2åŠ æƒåŠŸèƒ½æ‰«æï¼Œè€Œè¾ƒé«˜çš„bå€¼ä¼šå¯¼è‡´å›¾åƒè´¨é‡ä¸‹é™ï¼ˆä½†å¯¹å¼¥æ•£çš„æ•æ„Ÿæ€§æ›´é«˜ï¼‰ã€‚ å…¶ä¸­ï¼Œæœ€é‡è¦çš„æ£€æŸ¥æ˜¯ç¡®ä¿bvalsçš„æ•°é‡å’Œbvecsçš„æ•°é‡ä¸æ•°æ®é›†ä¸­çš„å·æ•°ç›¸åŒã€‚\n$ mrinfo -size sub-CON02_ses-preop_acq-AP_dwi.mif 96 96 60 102 # è¾“å‡ºmifçš„ä¿¡æ¯ï¼Œä½¿ç”¨awkå‘½ä»¤ï¼Œæå–è¾“å‡ºæ–‡æœ¬çš„ç¬¬4åˆ—å†…å®¹ï¼› $ mrinfo -size sub-CON02_ses-preop_acq-AP_dwi.mif | awk \u0026#39;{print $4}\u0026#39; 102 ä»ä¸Šè¿°å‘½ä»¤ï¼Œæˆ‘ä»¬å¾—åˆ°mifæ–‡ä»¶ä¸­çš„volumesçš„æ•°é‡ä¸º102ï¼Œç„¶åæˆ‘ä»¬å†æ¥æ£€æŸ¥ä¸€ä¸‹bvalså’Œbvecsæ–‡ä»¶çš„æ•°é‡æ˜¯å¦ä¸€è‡´ã€‚\n$ awk \u0026#39;{print NF;exit}\u0026#39; sub-CON02_ses-preop_acq-AP_dwi.bvec 102 $ awk \u0026#39;{print NF}\u0026#39; sub-CON02_ses-preop_acq-AP_dwi.bval 102 AWKä¸­NFç”¨æ³•\n\u0026gt; $NFè¡¨ç¤ºä¸€è¡Œæ•°æ®æœ€åä¸€åˆ—çš„é‚£ä¸ªå€¼ï¼›NFè¡¨çš„æ˜¯ä¸€è¡Œæ•°æ®çš„åˆ—æ•°; \u0026gt; æ¯”å¦‚æœ‰ä¸ªæ–‡æœ¬å†…å®¹ä¸ºï¼š \u0026gt; a b c d e \u0026gt; é‚£ä¹ˆawk \u0026#39;print $NF\u0026#39;ä¼šæ‰“å°å‡ºe \u0026gt; awk \u0026#39;print NF\u0026#39;ä¼šæ‰“å°å‡º5ï¼Œä¹Ÿå°±æ˜¯åˆ—æ•°ï¼› å¦‚æœä½ çš„æ•°æ®é›†ä¸­çš„å·æ•°ä¸bvalså’Œbvecsçš„æ•°é‡ä¸ä¸€è‡´ï¼Œä½ åº”è¯¥å‘ä½ çš„æ‰«ææŠ€æœ¯å‘˜æ£€æŸ¥è¿™ä¸ªå·®å¼‚ï¼›æ–‡ä»¶å¯èƒ½æ²¡æœ‰æ­£ç¡®ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæˆ–è€…å¯èƒ½æ²¡æœ‰æ­£ç¡®è·å¾—æ‰©æ•£åŠ æƒå›¾åƒã€‚\nå­¦ä¹ å‚è€ƒ å®˜ç½‘æ–‡æ¡£ https://andysbrainbook.readthedocs.io/en/latest/MRtrix/MRtrix_Introduction.html https://osf.io/ht7zv https://andysbrainbook.readthedocs.io/en/latest/TBSS/TBSS_Overview.html https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/TBSS/UserGuide "
},
{
	"uri": "https://LiaoPan.github.io/basics/",
	"title": "åŸºç¡€çŸ¥è¯†",
	"tags": [],
	"description": "",
	"content": "Chapter 1 Basics Discover what this Hugo theme is all about and the core-concepts behind it.\n"
},
{
	"uri": "https://LiaoPan.github.io/mrtrix/preprocessing/",
	"title": "MRtrix3æ•™ç¨‹ #2 é¢„å¤„ç†",
	"tags": [],
	"description": "",
	"content": " ç®€ä»‹ dwi_denoiseå‘½ä»¤ä½¿ç”¨ mrcalcå‘½ä»¤ä½¿ç”¨ mri_degibbså‘½ä»¤ä½¿ç”¨ æå–åç›¸ç¼–ç å›¾åƒ(dwiextractã€mrcatã€mrmath) å°†å®ƒä»¬æ”¾åœ¨ä¸€èµ·ï¼šä½¿ç”¨dwipreprocè¿›è¡Œé¢„å¤„ç†(Eddyå¤„ç†ï¼Œå»é™¤æ¶¡æµ) æ£€æŸ¥æŸåçš„åˆ‡ç‰‡ ç”ŸæˆMask(dwibiascorrectã€dwi2mask) å‚è€ƒèµ„æ–™ ç®€ä»‹ å°±åƒå…¶ä»–ç¥ç»å½±åƒå­¦æ•°æ®ä¸€æ ·ï¼Œæ‰©æ•£æ•°æ®åœ¨åˆ†æå‰åº”è¿›è¡Œé¢„å¤„ç†ã€‚é¢„å¤„ç†å¯ä»¥å»é™¤å›¾åƒä¸­çš„å™ªå£°æºï¼Œå¦‚è¿åŠ¨ä¼ªå½±å’Œå…¶ä»–å¤±çœŸã€‚æ‰©æ•£æ•°æ®å°¤å…¶å®¹æ˜“å—åˆ°ç›¸ä½ç¼–ç æ–¹å‘çš„å½±å“è€Œäº§ç”Ÿæ‰­æ›²çš„ä¼ªå½±ï¼š ä¸€èˆ¬æ¥è¯´ï¼Œä¸»è¦çš„ç¼–ç æ–¹å‘\u0026ndash;å¦‚å‰å‘å(Anterior to Posterior, AP)\u0026ndash;ä¼šä½¿å¤§è„‘çš„å‰éƒ¨çœ‹èµ·æ¥æ›´ \u0026ldquo;å‹æ‰\u0026rdquo;ï¼Œå°±åƒä»å‰éƒ¨æ–¹å‘å¹æ¥çš„å¼ºé£ã€‚åè‡³å‰(Posterior to Anterior,PA)ï¼Œç›¸ä½ç¼–ç æ–¹å‘çš„æƒ…å†µåˆ™ç›¸åã€‚æœ‰æ—¶è¿™äº›æ‰­æ›²æ˜¯éå¸¸å¾®å¦™çš„ï¼Œä½†å…¶ä»–æ—¶å€™å®ƒä»¬æ˜¯æ˜æ˜¾çš„ã€‚ ä»¥ä¸‹æ˜¯ä½¿ç”¨ MRtrix å®Œæˆçš„å¸¸è§é¢„å¤„ç†æ­¥éª¤:\ndwi_denoiseå‘½ä»¤ä½¿ç”¨ æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä¸ªé¢„å¤„ç†æ­¥éª¤æ˜¯é€šè¿‡ä½¿ç”¨MRtrixçš„dwidenoiseå‘½ä»¤å¯¹æ•°æ®è¿›è¡Œå»å™ªã€‚è¿™éœ€è¦ä¸€ä¸ªè¾“å…¥å’Œä¸€ä¸ªè¾“å‡ºå‚æ•°ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©ç”¨-noiseé€‰é¡¹æ¥è¾“å‡ºå™ªå£°å›¾ã€‚æ¯”å¦‚è¯´ï¼š\n# æŸ¥çœ‹ä½¿ç”¨è¯´æ˜ $ dwidenoise -h MRtrix 3.0.4 dwidenoise Dec 14 2022 dwidenoise: part of the MRtrix3 package SYNOPSIS dMRI noise level estimation and denoising using Marchenko-Pastur PCA USAGE dwidenoise [ options ] dwi out dwi the input diffusion-weighted image. out the output denoised DWI image. ...... # è¿è¡Œæ­¤å‘½ä»¤éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚ $ dwidenoise sub-CON02_ses-preop_acq-AP_dwi.mif sub-CON02_ses-preop_acq-AP_dwi_denoise.mif -noise noise.mif dwidenoise: [100%] preloading data for \u0026#34;sub-CON02_ses-preop_acq-AP_dwi.mif\u0026#34; dwidenoise: [100%] running MP-PCA denoising mrcalcå‘½ä»¤ä½¿ç”¨ ä¸€ä¸ªè´¨é‡æ£€æŸ¥æ˜¯çœ‹æ®‹å·®(residuals)æ˜¯å¦åŠ è½½åˆ°è§£å‰–ç»“æ„çš„ä»»ä½•éƒ¨åˆ†ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œè¿™å¯èƒ½è¡¨æ˜å¤§è„‘åŒºåŸŸå—åˆ°æŸç§ä¼ªå½±æˆ–æ‰­æ›²çš„å½±å“ä¸æˆæ¯”ä¾‹ã€‚ä¸ºäº†è®¡ç®—è¿™ä¸ªæ®‹å·®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å¦ä¸€ä¸ªMRtrixå‘½ä»¤ï¼Œå«åšmrcalc\n$ mrcalc -h MRtrix 3.0.4 mrcalc Dec 14 2022 mrcalc: part of the MRtrix3 package SYNOPSIS Apply generic voxel-wise mathematical operations to images USAGE mrcalc [ options ] operand [ operand ... ] operand an input image, intensity value, or the special keywords \u0026#39;rand\u0026#39; (random number between 0 and 1) or \u0026#39;randn\u0026#39; (random number from unit std.dev. normal distribution) or the mathematical constants \u0026#39;e\u0026#39; and \u0026#39;pi\u0026#39;. ... EXAMPLE USAGES Double the value stored in every voxel: $ mrcalc a.mif 2 -mult r.mif This performs the operation: r = 2*a for every voxel a,r in images a.mif and r.mif respectively. A more complex example: $ mrcalc a.mif -neg b.mif -div -exp 9.3 -mult r.mif This performs the operation: r = 9.3*exp(-a/b) Another complex example: $ mrcalc a.mif b.mif -add c.mif d.mif -mult 4.2 -add -div r.mif This performs: r = (a+b)/(c*d+4.2). ... basic operations -abs (multiple uses permitted) |%1| : return absolute value (magnitude) of real or complex number -neg (multiple uses permitted) -%1 : negative value -add (multiple uses permitted) (%1 + %2) : add values -subtract (multiple uses permitted) (%1 - %2) : subtract nth operand from (n-1)th ... # ä½¿ç”¨åŸå§‹æ‰©æ•£æ•°æ®å‡å»ç»è¿‡dwidenoiseé™å™ªåçš„æ•°æ®ï¼Œä¼šå¾—åˆ°ç›¸å…³çš„æ®‹å·®æ•°æ®ï¼› $ mrcalc sub-CON02_ses-preop_acq-AP_dwi.mif sub-CON02_ses-preop_acq-AP_dwi_denoise.mif -subtract residual.mif mrcalc: [100%] computing: (sub-CON02_ses-preop_acq-AP_dwi.mif - sub-CON02_ses-preop_acq-AP_dwi_denoise.mif) ç„¶åä½¿ç”¨mriviewè½¯ä»¶æ¥æŸ¥çœ‹è¿™ä¸ªæ®‹å·®å›¾(residual map)ã€‚\nmrview residual.mif å¸¸è§çš„æ˜¯çœ‹åˆ°å¤§è„‘çš„ç°è‰²è½®å»“ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ç„¶è€Œï¼Œç°è´¨å’Œç™½è´¨å†…çš„ä¸€åˆ‡éƒ½åº”è¯¥æ˜¯ç›¸å¯¹å‡åŒ€å’Œæ¨¡ç³Šçš„ï¼›å¦‚æœä½ çœ‹åˆ°ä»»ä½•æ¸…æ™°çš„è§£å‰–æ ‡å¿—ï¼Œå¦‚ä¸ªåˆ«çš„è„‘å›æˆ–è„‘æ²Ÿï¼Œè¿™å¯èƒ½è¡¨æ˜å¤§è„‘çš„è¿™äº›éƒ¨åˆ†å·²ç»è¢«å™ªå£°æ‰€ç ´å(å¦‚ä¸‹å›¾æ‰€ç¤º)ã€‚ å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œä½ å¯ä»¥å°†å»å™ªè¿‡æ»¤å™¨çš„èŒƒå›´ä»é»˜è®¤çš„5å¢åŠ åˆ°ä¸€ä¸ªæ›´å¤§çš„æ•°å­—ï¼Œå¦‚7ï¼›\n$ dwidenoise your_data.mif your_data_denoised_7extent.mif -extent 7 -noise noise.mif mri_degibbså‘½ä»¤ä½¿ç”¨ ä¸€ä¸ªå¯é€‰çš„é¢„å¤„ç†æ­¥éª¤æ˜¯è¿è¡Œmri_degibbsï¼Œå®ƒå¯ä»¥ä»æ•°æ®ä¸­å»é™¤å‰å¸ƒæ–¯ä¼ªå½±,Gibbs\u0026rsquo; ringing artifactsã€‚è¿™äº›ä¼ªå½±çœ‹èµ·æ¥åƒæ± å¡˜é‡Œçš„æ¶Ÿæ¼ªï¼Œåœ¨bå€¼ä¸º0çš„å›¾åƒä¸­æœ€ä¸ºæ˜æ˜¾,é€šå¸¸è¡¨ç°ä¸ºç´§é‚»é«˜å¯¹æ¯”åº¦ç•Œé¢çš„å¤šæ¡ç²¾ç»†å¹³è¡Œçº¿ã€‚ é¦–å…ˆç”¨mrviewæŸ¥çœ‹ä½ çš„æ‰©æ•£æ•°æ®ï¼Œç¡®å®šæ˜¯å¦æœ‰ä»»ä½•å‰å¸ƒæ–¯ä¼ªå½±ï¼›å¦‚æœæœ‰ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡æŒ‡å®šè¾“å…¥æ–‡ä»¶å’Œè¾“å‡ºæ–‡ä»¶æ¥è¿è¡Œmrdegibbsï¼Œä¾‹å¦‚:\n$ mrdegibbs -h MRtrix 3.0.4 mrdegibbs Dec 14 2022 mrdegibbs: part of the MRtrix3 package SYNOPSIS Remove Gibbs Ringing Artifacts USAGE mrdegibbs [ options ] in out in the input image. out the output image. DESCRIPTION This application attempts to remove Gibbs ringing artefacts from MRI images using the method of local subvoxel-shifts proposed by Kellner et al. (see reference below for details). .... $ mrdegibbs sub-CON02_ses-preop_acq-AP_dwi_denoise.mif sub-CON02_ses-preop_acq-AP_dwi_den_unr.mif mrdegibbs: [100%] performing Gibbs ringing removal åƒå¾€å¸¸ä¸€æ ·ï¼Œç”¨mrviewæ£€æŸ¥å‰åçš„æ•°æ®ï¼Œä»¥ç¡®å®šé¢„å¤„ç†æ­¥éª¤æ˜¯å¦ä½¿æ•°æ®å˜å¾—æ›´å¥½ã€æ›´å·®ï¼Œæˆ–è€…æ²¡æœ‰å½±å“ã€‚ å¦‚æœä½ åœ¨ä½ çš„æ•°æ®ä¸­æ²¡æœ‰çœ‹åˆ°ä»»ä½•å‰å¸ƒæ–¯ä¼ªå½±ï¼Œé‚£ä¹ˆæˆ‘å»ºè®®çœç•¥è¿™ä¸€æ­¥éª¤ã€‚\næå–åç›¸ç¼–ç å›¾åƒ(dwiextractã€mrcatã€mrmath) å¤§å¤šæ•°æ‰©æ•£æ•°æ®æ˜¯ç”±ä¸¤ä¸ªç‹¬ç«‹çš„æˆåƒæ–‡ä»¶ç»„æˆçš„ï¼šä¸€ä¸ªæ˜¯ä»¥ä¸»ç›¸ä½ç¼–ç æ–¹å‘ï¼ˆprimary phase-encoding directionï¼‰è·å–çš„ï¼Œä¸€ä¸ªæ˜¯ä»¥åå‘ç›¸ä½ç¼–ç æ–¹å‘è·å–çš„ã€‚ä¸»ç›¸ä½ç¼–ç æ–¹å‘ç”¨äºè·å–ä¸åŒbå€¼çš„å¤§éƒ¨åˆ†æ‰©æ•£å›¾åƒã€‚å¦ä¸€æ–¹é¢ï¼Œåå‘ç›¸ä½ç¼–ç æ–‡ä»¶ç”¨äºæ¶ˆé™¤ä¸»ç›¸ä½ç¼–ç æ–‡ä»¶ä¸­å­˜åœ¨çš„ä»»ä½•å¤±çœŸç°è±¡ã€‚\nä¸ºäº†ç†è§£è¿™ä¸€ç‚¹ï¼Œæƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨ç”¨å¹é£æœºå¹å¤´å‘ã€‚å‡è®¾ä½ æŠŠå¹é£æœºå¯¹å‡†ä½ çš„åè„‘å‹ºï¼Œå®ƒæŠŠä½ çš„å¤´å‘å‘å‰å¹ï¼Œå¹åˆ°ä½ çš„è„¸å‰ï¼›è®©æˆ‘ä»¬æŠŠè¿™ç§°ä¸ºåéƒ¨åˆ°å‰éƒ¨ï¼ˆPAï¼‰çš„ç›¸ä½ç¼–ç æ–¹å‘ã€‚ç°åœ¨ä½ çš„å¤´å‘çœ‹èµ·æ¥å¾ˆä¹±ï¼Œä½ æƒ³æ¶ˆé™¤ç©ºæ°”ä»åè„‘å‹ºå¹åˆ°å‰è„‘å‹ºçš„å½±å“ã€‚æ‰€ä»¥ä½ æŠŠå¹é£æœºå¯¹å‡†ä½ çš„è„¸çš„å‰é¢ï¼Œå®ƒæŠŠä½ çš„å¤´å‘å¹å‘åé¢ã€‚å¦‚æœä½ å–å…¶ä¸­ä¸¤æ¬¡å¹é£çš„å¹³å‡å€¼ï¼Œä½ çš„å¤´å‘åº”è¯¥å›åˆ°æ­£å¸¸ä½ç½®ã€‚\nåŒæ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸¤ç§ç›¸ä½ç¼–ç æ–¹å‘ï¼Œåœ¨ä¸¤è€…ä¹‹é—´åˆ›é€ ä¸€ç§å¹³å‡å€¼ã€‚æˆ‘ä»¬çŸ¥é“è¿™ä¸¤ç§ç›¸ä½ç¼–ç æ–¹å¼éƒ½ä¼šç»™æ•°æ®å¸¦æ¥ä¸¤ç§ç‹¬ç«‹çš„ã€ç›¸åçš„æ‰­æ›²ï¼Œä½†æˆ‘ä»¬å¯ä»¥ç”¨æ¶ˆé™¤æ‰­æ›²æ¥æŠµæ¶ˆå®ƒä»¬ã€‚\næˆ‘ä»¬çš„ç¬¬ä¸€æ­¥æ˜¯å°†åå‘ç›¸ä½ç¼–ç çš„NIFTIæ–‡ä»¶è½¬æ¢ä¸º.mifæ ¼å¼ã€‚æˆ‘ä»¬è¿˜å°†å…¶bå€¼å’Œbå‘é‡æ·»åŠ åˆ°mifå¤´æ–‡ä»¶ä¸­ã€‚\n$ mrconvert sub-CON02_ses-preop_acq-PA_dwi.nii.gz - -fslgrad sub-CON02_ses-preop_acq-PA_dwi.bvec sub-CON02_ses-preop_acq-PA_dwi.bval | mrmath - mean mean_b0_PA.mif -axis 3 mrconvert: [100%] uncompressing image \u0026#34;sub-CON02_ses-preop_acq-PA_dwi.nii.gz\u0026#34; mrconvert: [100%] copying from \u0026#34;sub-CON02_ses-preop_acq-PA_dwi.nii.gz\u0026#34; to \u0026#34;/var/folde...0gn/T/mrtrix-tmp-XwJdp7.mif\u0026#34; mrmath: [100%] preloading data for \u0026#34;/var/folders/39/93zn2fy95cd9b_b38zvmvgjc0000gn/T/mrtrix-tmp-XwJdp7.mif\u0026#34; mrmath: [100%] computing mean along axis 3... æ³¨æ„è¿™é‡Œçš„-ä¸ºä¸´æ—¶æ–‡ä»¶å‘½åæ–¹å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨|åçš„shellå‘½ä»¤ä¸‹ç›´æ¥ç»§ç»­ä½¿ç”¨å®ƒã€‚ åŸPAæ–‡ä»¶sub-CON02_ses-preop_acq-PA_dwi.nii.gzæ•°æ®ç»´åº¦ä¸º9696602 ,å¾—åˆ°çš„æ–‡ä»¶mean_b0_PA.mifçš„æ•°æ®ç»´åº¦å˜æˆäº†9696*60ï¼Œå³æŒ‡å®šäº†axis=3ï¼Œå°†åœ¨æ—¶é—´ç»´åº¦ï¼ˆæˆ–è€…è¯´volumesï¼‰å±‚é¢ä¸Šè¿›è¡Œäº†å¹³å‡ï¼ˆmeanï¼‰ã€‚\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»åˆçº§ç›¸ä½ç¼–ç å›¾åƒä¸­æå–bå€¼ï¼Œç„¶åå°†ä¸¤è€…ä¸mrcatç»“åˆï¼š\n$ dwiextract -h MRtrix 3.0.4 dwiextract Dec 14 2022 dwiextract: part of the MRtrix3 package SYNOPSIS Extract diffusion-weighted volumes, b=0 volumes, or certain shells from a DWI dataset USAGE dwiextract [ options ] input output input the input DW image. output the output image (diffusion-weighted volumes by default). EXAMPLE USAGES Calculate the mean b=0 image from a 4D DWI series: $ dwiextract dwi.mif - -bzero | mrmath - mean mean_bzero.mif -axis 3 The dwiextract command extracts all volumes for which the b-value is (approximately) zero; the resulting 4D image can then be provided to the ... OPTIONS -bzero Output b=0 volumes (instead of the diffusion weighted volumes, if -singleshell is not specified). -no_bzero Output only non b=0 volumes (default, if -singleshell is not specified). ... $ mrcat -h MRtrix 3.0.4 mrcat Dec 14 2022 mrcat: part of the MRtrix3 package SYNOPSIS Concatenate several images into one USAGE mrcat [ options ] image1 image2 [ image2 ... ] output image1 the first input image. image2 additional input image(s). output the output image. EXAMPLE USAGES Concatenate individual 3D volumes into a single 4D image series: $ mrcat volume*.mif series.mif The wildcard characters will find all images in the current working # ä½¿ç”¨dwiextractæå–APæ–¹å‘bå€¼ä¸º0çš„æ‰€æœ‰volumesï¼Œå¹¶è·å–å…¶å‡å€¼mifæ–‡ä»¶ï¼› $ dwiextract sub-CON02_ses-preop_acq-AP_dwi_denoise.mif - -bzero | mrmath - mean mean_b0_AP.mif -axis 3 # ä½¿ç”¨mrcatå‘½ä»¤åˆå¹¶ä¸¤ä¸ªå›¾åƒæ–‡ä»¶,è¿™å°†åˆ›å»ºä¸€ä¸ªæ–°å›¾åƒâ€œb0_pair.mifâ€ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªç›¸ä½ç¼–ç å›¾åƒçš„å¹³å‡b=0å›¾åƒã€‚ $ mrcat mean_b0_AP.mif mean_b0_PA.mif -axis 3 b0_pair.mif mrcat: [100%] concatenating \u0026#34;mean_b0_AP.mif\u0026#34; mrcat: [100%] concatenating \u0026#34;mean_b0_PA.mif\u0026#34; å°†å®ƒä»¬æ”¾åœ¨ä¸€èµ·ï¼šä½¿ç”¨dwipreprocè¿›è¡Œé¢„å¤„ç†(Eddyå¤„ç†ï¼Œå»é™¤æ¶¡æµ) ç°åœ¨æˆ‘ä»¬æœ‰äº†è¿è¡Œä¸»è¦é¢„å¤„ç†æ­¥éª¤æ‰€éœ€çš„ä¸€åˆ‡ï¼Œè¯¥æ­¥éª¤ç”±dwipreprocè°ƒç”¨ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯ä¸€ä¸ªåŒ…è£…å™¨ï¼Œå®ƒä½¿ç”¨FSLçš„å‘½ä»¤ï¼Œå¦‚topupå’Œeddyï¼Œæ¥è§£é™¤æ•°æ®çš„æ‰­æ›²å¹¶å»é™¤æ¶¡æµã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸‹é¢è¿™è¡Œä»£ç ï¼š\n$ dwifslpreproc -h MRtrix 3.0.4 dwifslpreproc dwifslpreproc: part of the MRtrix3 package SYNOPSIS Perform diffusion image pre-processing using FSL\u0026#39;s eddy tool; including inhomogeneity distortion correction using FSL\u0026#39;s topup tool if possible USAGE dwifslpreproc [ options ] input output input The input DWI series to be corrected output The output corrected image series DESCRIPTION This script is intended to provide convenience of use of the FSL software tools topup and eddy for performing DWI pre-processing, by encapsulating some of the surrounding image data and metadata processing steps. It is intended to simply these processing steps for most commonly-used DWI acquisition strategies, whilst also providing support for some more exotic ... OPTIONS -pe_dir PE Manually specify the phase encoding direction of the input series; can be a signed axis number (e.g. -0, 1, +2), an axis designator (e.g. RL, PA, IS), or NIfTI axis codes (e.g. i-, j, k) -eddy_options \u0026#34; EddyOptions\u0026#34; Manually provide additional command-line options to the eddy command (provide a string within quotation marks that contains at least one space, even if only passing a single command-line option to eddy) -se_epi image Provide an additional image series consisting of spin-echo EPI images, which is to be used exclusively by topup for estimating the inhomogeneity field (i.e. it will not form part of the output image series) ... Options for specifying the acquisition phase-encoding design; note that one of the -rpe_* option s MUST be provided -rpe_none Specify that no reversed phase-encoding image data is being provided; eddy will perform eddy current and motion correction only -rpe_pair Specify that a set of images (typically b=0 volumes) will be provided for use in inhomogeneity field estimation only (using the -se_epi option) -rpe_all Specify that ALL DWIs have been acquired with opposing phase-encoding ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¾“å…¥å’Œè¾“å‡ºï¼›ç¬¬äºŒä¸ªé€‰é¡¹ï¼Œ-nocleanupå°†ä¿ç•™ä¸´æ—¶å¤„ç†æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«ä¸€äº›æˆ‘ä»¬ä»¥åè¦æ£€æŸ¥çš„æ–‡ä»¶ã€‚ -pe_dir APè¡¨ç¤ºä¸»ç›¸ä½ç¼–ç æ–¹å‘æ˜¯ä»å‰åˆ°åï¼Œè€Œ-rpe_pairä¸-se_epié€‰é¡¹ç›¸ç»“åˆï¼Œè¡¨ç¤ºä¸‹é¢çš„è¾“å…¥æ–‡ä»¶ï¼ˆå³ \u0026ldquo;b0_pair.mif\u0026rdquo;ï¼‰æ˜¯ä¸€å¯¹è‡ªæ—‹å›æ³¢å›¾åƒï¼Œæ˜¯ç”¨åå‘ç›¸ä½ç¼–ç æ–¹å‘è·å–çš„ã€‚æœ€åï¼Œ-eddy_optionsæŒ‡å®šäº†FSLå‘½ä»¤eddyçš„ç‰¹å®šé€‰é¡¹ã€‚ä½ å¯ä»¥è®¿é—®eddyç”¨æˆ·æŒ‡å—ï¼Œäº†è§£æ›´å¤šçš„é€‰é¡¹å’Œå®ƒä»¬çš„è¯¦ç»†ä½œç”¨ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªä½¿ç”¨é€‰é¡¹--slm=linearï¼ˆè¿™å¯¹è·å–çš„æ•°æ®å°‘äº60ä¸ªæ–¹å‘çš„æ•°æ®å¾ˆæœ‰ç”¨ï¼‰å’Œ--data_is_shelledï¼ˆè¿™è¡¨æ˜æ‰©æ•£æ•°æ®æ˜¯ç”¨å¤šä¸ªbå€¼è·å–çš„ï¼‰ã€‚\n# dwifslpreproc \u0026lt;input.mif\u0026gt; \u0026lt;output.mif\u0026gt; -nocleanup -pe_dir AP -rpe_pair -se_epi b0_pair.mif -eddy_options \u0026#34; --slm=linear --data_is_shelled\u0026#34; $ dwifslpreproc sub-CON02_ses-preop_acq-AP_dwi_denoise.mif sub-02_den_preproc.mif -nocleanup -pe_dir AP -rpe_pair -se_epi b0_pair.mif -eddy_options \u0026#34; --slm=linear --data_is_shelled\u0026#34; dwifslpreproc: dwifslpreproc: Note that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information. dwifslpreproc: dwifslpreproc: Generated scratch directory: /Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/dwifslpreproc-tmp-RUWVON/ Command: mrconvert /Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/sub-CON02_ses-preop_acq-AP_dwi_denoise.mif /Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/dwifslpreproc-tmp-RUWVON/dwi.mif -json_export /Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/dwifslpreproc-tmp-RUWVON/dwi.json Command: mrconvert /Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/b0_pair.mif /Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/dwifslpreproc-tmp-RUWVON/se_epi.mif dwifslpreproc: Changing to scratch directory (/Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/dwifslpreproc-tmp-RUWVON/) dwifslpreproc: Total readout time not provided at command-line; assuming sane default of 0.1 Command: mrinfo dwi.mif -export_grad_mrtrix grad.b Command: mrconvert se_epi.mif topup_in.nii -import_pe_table se_epi_manual_pe_scheme.txt -strides -1,+2,+3,+4 -export_pe_table topup_datain.txt Command: topup --imain=topup_in.nii --datain=topup_datain.txt --out=field --fout=field_map.nii.gz --config=/Applications/fsl/etc/flirtsch/b02b0.cnf --verbose ... è¿™ä¸ªå‘½ä»¤å¯èƒ½éœ€è¦å‡ ä¸ªå°æ—¶æ¥è¿è¡Œï¼Œè¿™å–å†³äºä½ çš„è®¡ç®—æœºé€Ÿåº¦ã€‚å¯¹äºä¸€å°æ‹¥æœ‰8ä¸ªå¤„ç†æ ¸å¿ƒçš„iMacæ¥è¯´ï¼Œå¤§çº¦éœ€è¦2ä¸ªå°æ—¶ã€‚å½“å®ƒå®Œæˆåï¼Œæ£€æŸ¥è¾“å‡ºï¼Œçœ‹çœ‹æ¶¡æµæ ¡æ­£å’Œå–æ¶ˆæ‰­æ›²å¦‚ä½•æ”¹å˜äº†æ•°æ®ï¼›ç†æƒ³æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥çœ‹åˆ°åœ¨è¯¸å¦‚çœ¶é¢çš®å±‚ç­‰åŒºåŸŸæ¢å¤äº†æ›´å¤šçš„ä¿¡å·ï¼Œè¿™äº›åŒºåŸŸç‰¹åˆ«å®¹æ˜“å—åˆ°ä¿¡å·ä¸¢å¤±çš„å½±å“ã€‚\nç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨mrviewå‘½ä»¤åŠ è½½åŸå§‹æ•°æ®ä»¥åŠç»è¿‡å¤„ç†åçš„æ•°æ®ï¼Œå¯¹æ¯”æŸ¥çœ‹å…¶é¢„å¤„ç†æ•ˆæœã€‚\n# mrview \u0026lt;ç»è¿‡é¢„å¤„ç†åæ•°æ®\u0026gt; -overlay.load \u0026lt;åŸå§‹æ•°æ®\u0026gt; $ mrview sub-02_den_preproc.mif -overlay.load sub-CON02_ses-preop_acq-AP_dwi_denoise.mif æ£€æŸ¥æŸåçš„åˆ‡ç‰‡ dwifslpreprocå‘½ä»¤ä¸­çš„ä¸€ä¸ªé€‰é¡¹ï¼Œ\u0026quot;-nocleanup\u0026quot;ï¼Œä¿ç•™äº†ä¸€ä¸ªæ ‡é¢˜ä¸º \u0026ldquo;tmp \u0026ldquo;çš„ç›®å½•ã€‚åœ¨è¿™ä¸ªç›®å½•ä¸­ï¼Œæœ‰ä¸€ä¸ªåä¸ºdwi_post_eddy.eddy_outlier_mapçš„æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†0å’Œ1çš„å­—ç¬¦ä¸²ã€‚æ¯ä¸€ä¸ª1ä»£è¡¨ä¸€ä¸ªåˆ‡ç‰‡æ˜¯ä¸€ä¸ªç¦»ç¾¤ç‚¹ï¼Œå¯èƒ½æ˜¯å› ä¸ºè¿åŠ¨é‡å¤ªå¤§ã€æ¶¡æµæˆ–å…¶ä»–åŸå› ã€‚\nä¸‹é¢çš„ä»£ç ï¼Œä»dwiç›®å½•ä¸‹è¿è¡Œï¼Œå°†å¯¼èˆªåˆ° \u0026ldquo;tmp \u0026ldquo;æ–‡ä»¶å¤¹ï¼Œå¹¶è®¡ç®—å‡ºç¦»ç¾¤ç‰‡çš„ç™¾åˆ†æ¯”ï¼š shell dwi_post_eddy.eddy_outlier_map #/bin/bash set -e # è¿›å…¥dwifslpreproc-tmp-*ä¸´æ—¶ç›®å½• cd dwifslpreproc-tmp-* # ç»Ÿè®¡slicesæ•°é‡ï¼šæ‰¾åˆ°dwi.mifæ–‡ä»¶çš„ç»´åº¦(Dimensions: 96 x 96 x 60 x 102)ï¼Œ,å¹¶å¾—åˆ°ç¬¬6åˆ—å€¼ä¸º60ï¼Œç¬¬8åˆ—å€¼ä¸º102ï¼Œç›¸ä¹˜è®¡ç®—æ•´ä½“çš„slicesæ•°é‡ï¼› totalSlices=`mrinfo dwi.mif | grep Dimensions | awk \u0026#39;{print $6 * $8}\u0026#39;` # ç»Ÿè®¡ç¦»ç¾¤ç‚¹çš„ä¸ªæ•°ï¼šä»å‰åˆ°åç´¯åŠ dwi_post_eddy.eddy_outlier_mapæ–‡ä»¶çš„æ•°å€¼ï¼Œç„¶åè¾“å‡ºï¼› # æ³¨æ„è¿™é‡Œç›¸å¯¹åŸæ•™ç¨‹æ–°å¢äº†NR\u0026gt;1,åŸå› ä¸ºç›®å‰è¾“å‡ºdwi_post_eddy.eddy_outlier_mapæ–‡ä»¶çš„ç¬¬ä¸€è¡Œä¸ºè¯´æ˜æ–‡å­—ï¼Œéœ€è¦å»é™¤ç¬¬ä¸€è¡Œï¼Œé¿å…ç»Ÿè®¡ã€‚ totalOutliers=`awk \u0026#39;NR\u0026gt;1{ for(i=1;i\u0026lt;=NF;i++)sum+=$i } END { print sum }\u0026#39; dwi_post_eddy.eddy_outlier_map` # å¦‚æœç¦»ç¾¤ç‚¹æ•°é‡è¶…è¿‡10ï¼Œåˆ™å»ºè®®ä¸è¦ä½¿ç”¨è¯¥æ•°æ®ï¼› echo \u0026#34;If the following number is greater than 10, you may have to discard this subject because of too much motion or corrupted slices\u0026#34; # è®¡ç®—ç¦»ç¾¤ç‚¹çš„ç™¾åˆ†æ¯”æ¯”ä¾‹ï¼š ç¦»ç¾¤ç‚¹æ•°é‡/Slicesæ€»æ•°ï¼‰* 100 echo -n \u0026#34;the percentage of outlier slices:\u0026#34; | tee percentageOutliers.txt echo \u0026#34;scale=5; ($totalOutliers / $totalSlices * 100)/1\u0026#34; | bc | tee -a percentageOutliers.txt cd .. One row per scan, one column per slice. Outlier: 1, Non-outlier: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ç”ŸæˆMask(dwibiascorrectã€dwi2mask) ä¸fMRIåˆ†æä¸€æ ·ï¼Œåˆ›å»ºä¸€ä¸ªæ©è†œï¼ˆmaskï¼‰æ¥é™åˆ¶ä½ çš„åˆ†æåªé™äºå¤§è„‘ä½“ç´ æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œè¿™å°†åŠ é€Ÿæˆ‘ä»¬çš„åˆ†æé€Ÿåº¦ã€‚\nè¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œäº‹å…ˆè¿è¡Œä¸€ä¸ªå«åšdwibiascorrectçš„å‘½ä»¤æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚è¿™å¯ä»¥å»é™¤æ•°æ®ä¸­æ£€æµ‹åˆ°çš„ä¸å‡åŒ€æ€§(inhomogeneities)ï¼Œä»è€Œè·å¾—æ›´å¥½çš„æ©è†œä¼°è®¡ã€‚ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ƒå¯èƒ½å¯¼è‡´æ›´åçš„ä¼°è®¡ï¼›ä¸æ‰€æœ‰çš„é¢„å¤„ç†æ­¥éª¤ä¸€æ ·ï¼Œä½ åº”è¯¥åœ¨æ¯ä¸ªæ­¥éª¤å‰åæ£€æŸ¥å®ƒï¼š\n$ dwibiascorrect -h MRtrix 3.0.4 dwibiascorrect dwibiascorrect: part of the MRtrix3 package SYNOPSIS Perform B1 field inhomogeneity correction for a DWI volume series USAGE dwibiascorrect algorithm [ options ] ... algorithm Select the algorithm to be used to complete the script operation; additional details and options become available once an algorithm is nominated. Options are: ants, fsl Options for importing the diffusion gradient table -grad GRAD Provide the diffusion gradient table in MRtrix format -fslgrad bvecs bvals Provide the diffusion gradient table in FSL bvecs/bvals format ... # ä½¿ç”¨dwibiascorrectæ¥æ¶ˆé™¤æ•°æ®ä¸­æ£€æµ‹åˆ°çš„ä¸å‡åŒ€æ€§ $ dwibiascorrect ants sub-02_den_preproc.mif sub-02_den_preproc_unbiased.mif -bias bias.mif dwibiascorrect: dwibiascorrect: Note that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information. dwibiascorrect: dwibiascorrect: Generated scratch directory: /Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/dwibiascorrect-tmp-PRRP4X/ Command: mrconvert /Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/sub-02_den_preproc.mif /Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/dwibiascorrect-tmp-PRRP4X/in.mif dwibiascorrect: Changing to scratch directory (/Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/dwibiascorrect-tmp-PRRP4X/) Command: dwi2mask in.mif mask.mif Command: dwiextract in.mif - -bzero | mrmath - mean mean_bzero.mif -axis 3 Command: mrconvert mean_bzero.mif mean_bzero.nii -strides +1,+2,+3 Command: mrconvert mask.mif mask.nii -strides +1,+2,+3 Command: N4BiasFieldCorrection -d 3 -i mean_bzero.nii -w mask.nii -o [corrected.nii,init_bias.nii] -s 4 -b [100,3] -c [1000,0.0] Command: mrcalc mean_bzero.mif mask.mif -mult - | mrmath - sum - -axis 0 | mrmath - sum - -axis 1 | mrmath - sum - -axis 2 | mrdump - Command: mrcalc corrected.nii mask.mif -mult - | mrmath - sum - -axis 0 | mrmath - sum - -axis 1 | mrmath - sum - -axis 2 | mrdump - Command: mrcalc init_bias.nii 0.7908883751651254 -mult bias.mif Command: mrcalc in.mif bias.mif -div result.mif Command: mrconvert result.mif /Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/sub-02_den_preproc_unbiased.mif Command: mrconvert bias.mif /Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/bias.mif dwibiascorrect: Changing back to original directory (/Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi) dwibiascorrect: Deleting scratch directory (/Volumes/Touch/Datasets/DTI/ds001226-download/sub-CON02/ses-preop/dwi/dwibiascorrect-tmp-PRRP4X/) ä¸Šé¢çš„å‘½ä»¤ä½¿ç”¨äº†-antsé€‰é¡¹ï¼Œè¿™éœ€è¦åœ¨ä½ çš„ç³»ç»Ÿä¸Šå®‰è£…ANTsã€‚æˆ‘æ¨èè¿™ä¸ªç¨‹åºï¼Œä½†ä¸‡ä¸€ä½ æ— æ³•å®‰è£…å®ƒï¼Œä½ å¯ä»¥ç”¨-fslé€‰é¡¹ä»£æ›¿å®ƒã€‚\n# å¦‚ä¸‹å±•ç¤ºäº†æœªå®‰è£…antsï¼Œé€ æˆçš„dwibiascorrectè¿è¡ŒæŠ¥é”™ä¿¡æ¯ã€‚ ... dwibiascorrect: [ERROR] Could not find ANTS program N4BiasFieldCorrection; please check installation ... ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨dwi2maskåˆ›å»ºæ©è†œï¼Œè¿™ä¼šå°†æŠŠæˆ‘ä»¬çš„åˆ†æé™åˆ¶åœ¨æˆ‘ä»¬æƒ³ä½äºå¤§è„‘å†…çš„ä½“ç´ ã€‚\n$ MRtrix 3.0.4 dwi2mask Dec 14 2022 dwi2mask: part of the MRtrix3 package SYNOPSIS Generates a whole brain mask from a DWI image USAGE dwi2mask [ options ] input output input the input DWI image containing volumes that are both diffusion weighted and b=0 output the output whole-brain mask image DESCRIPTION All diffusion weighted and b=0 volumes are used to obtain a mask that includes both brain tissue and CSF. In a second step peninsula-like extensions, where the peninsula itself is ... $ dwi2mask sub-02_den_preproc_unbiased.mif mask.mif dwi2mask: [100%] preloading data for \u0026#34;sub-02_den_preproc_unbiased.mif\u0026#34; dwi2mask: [done] computing dwi brain mask dwi2mask: [done] applying mask cleaning filter ä½¿ç”¨mrviewå‘½ä»¤æŸ¥çœ‹maskæ•°æ®\n$ mrview mask.mif MRtrixçš„dwi2maskå‘½ä»¤åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å·¥ä½œå¾—å¾ˆå¥½ã€‚ç„¶è€Œï¼Œä½ å¯ä»¥ä»ä¸Šé¢çš„å›¾ç‰‡ä¸­çœ‹åˆ°ï¼Œåœ¨è„‘å¹²å’Œå°è„‘å†…çš„æ©è†œä¸Šæœ‰å‡ ä¸ªæ´ã€‚ä½ å¯èƒ½å¯¹è¿™äº›åŒºåŸŸä¸æ„Ÿå…´è¶£ï¼Œä½†å»ºè®®ç¡®ä¿æ©è†œåœ¨ä»»ä½•åœ°æ–¹éƒ½æ²¡æœ‰æ´ã€‚\nä¸ºæ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨FSLçš„bet2è¿™æ ·çš„å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç å°†æ— åçš„æ‰©æ•£åŠ æƒå›¾åƒè½¬æ¢æˆNIFTIæ ¼å¼ï¼Œç”¨bet2åˆ›å»ºä¸€ä¸ªæ©è†œï¼Œç„¶åå°†æ©è†œè½¬æ¢æˆ.mifæ ¼å¼ï¼š\n$ mrconvert sub-02_den_preproc_unbiased.mif sub-02_unbiased.nii # æ³¨æ„ï¼šåœ¨å®è·µä¸­ï¼Œ-fæŒ‡å®šä¸º0.2è¾¾åˆ°äº†æœ€å¥½çš„æ©è†œæ•ˆæœï¼Œä¸åŸæ•™ç¨‹0.7æœ‰æ‰€ä¸åŒã€‚ $ bet2 sub-02_unbiased.nii sub-02_masked -m -f 0.2 # æ³¨æ„ï¼šåœ¨niftiè½¬æ¢ä¸ºmifæ–‡ä»¶æ—¶ï¼Œå¯èƒ½å­˜åœ¨è½¬æ¢æ•°æ®ç±»å‹çš„æŠ¥è­¦ä¿¡æ¯ $ mrconvert sub-02_masked_mask.nii.gz mask.mif ä½ å¯èƒ½å¿…é¡»å¯¹åˆ†æ•°å¼ºåº¦é˜ˆå€¼(fractional intensity threshold)ï¼ˆç”±-fæŒ‡å®šï¼‰è¿›è¡Œè¯•éªŒï¼Œä»¥ä¾¿äº§ç”Ÿä¸€ä¸ªä½ æ»¡æ„çš„æ©è†œã€‚æ ¹æ®æˆ‘çš„ç»éªŒï¼Œå¯¹å¤§å¤šæ•°å¤§è„‘æ¥è¯´ï¼Œè¿™ä¸ªé˜ˆå€¼å¯ä»¥åœ¨0.2å’Œ0.7ä¹‹é—´å˜åŒ–ï¼Œä»¥ä¾¿ç”Ÿæˆä¸€ä¸ªè¶³å¤Ÿçš„æ©è†œã€‚ å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨MRIcronè½¯ä»¶çš„Draw \u0026gt; Open VOIåŠŸèƒ½ï¼Œå»æ‰“å¼€niftiæ ¼å¼çš„æ©è†œæ–‡ä»¶ï¼Œå»é€å¸§ä¿®æ”¹ï¼Œç¡®ä¿æ©è†œæ–‡ä»¶ä¸å­˜åœ¨æ¼æ´ã€‚ å‚è€ƒèµ„æ–™ https://andysbrainbook.readthedocs.io/en/latest/MRtrix/MRtrix_Course/MRtrix_04_Preprocessing.html "
},
{
	"uri": "https://LiaoPan.github.io/dipy/tracking_basic/",
	"title": "çº¤ç»´æŸè¿½è¸ªå…¥é—¨",
	"tags": [],
	"description": "",
	"content": "Basic Tracking(Local fiber tracking) æœ¬æ•™ç¨‹çŸ¥è¯†ç‚¹ï¼š\nå¦‚ä½•ä½¿ç”¨æ‰©æ•£åƒæ•°æ®é›†æ¥å®ç°çº¤ç»´æŸé‡å»º 1)ä»æ‰©æ•£æ•°æ®é›†è·å–æ–¹å‘(directions)çš„æ–¹æ³•ã€‚ 2)è¯†åˆ«è¿½è¸ªä½•æ—¶å¿…é¡»åœæ­¢çš„æ–¹æ³•ã€‚ 3)è®¾ç½®è¿½è¸ªç§å­(seed)ã€‚ å¦‚ä½•ä¿å­˜trkæ–‡ä»¶ ä½¿ç”¨StatefulTractogram()å’Œsave_trk()å‡½æ•°ä¿å­˜trkæ–‡ä»¶ å±€éƒ¨çº¤ç»´è·Ÿè¸ª(Local fiber tracking)æ˜¯ä¸€ç§é€šè¿‡ä»å±€éƒ¨æ–¹å‘ä¿¡æ¯åˆ›å»ºæµçº¿(streamlines)æ¥æ¨¡æ‹Ÿç™½è´¨çº¤ç»´çš„æ–¹æ³•ã€‚å…¶æ€æƒ³å¦‚ä¸‹:å¦‚æœä¸€ä¸ªåŒºåŸŸ/è·¯å¾„æ®µçš„å±€éƒ¨æ–¹å‘æ˜¯å·²çŸ¥çš„ï¼Œå¯ä»¥æ²¿ç€è¿™äº›æ–¹å‘è¿›è¡Œé›†æˆï¼Œä»¥æ„å»ºè¯¥ç»“æ„çš„å®Œæ•´è¡¨ç¤ºã€‚å±€éƒ¨çº¤ç»´æŸè¿½è¸ªå› å…¶ç®€å•ã€é²æ£’æ€§å¥½è€Œè¢«å¹¿æ³›åº”ç”¨äºæ‰©æ•£MRIé¢†åŸŸã€‚\næ­¥éª¤ä¸€. ä»æ‰©æ•£æ•°æ®é›†è·å–æ–¹å‘(directions)çš„æ–¹æ³•\nåŸºäº Constant Solid Angle ODFæ¨¡å‹æ¥æ‹Ÿåˆæ•°æ®ï¼Œè¯¥æ¨¡å‹ä¼šè¯„ä¼°æ¯ä¸ªvoxelçš„å–å‘åˆ†å¸ƒå‡½æ•°(ODF,Orientation Distribution Function)ã€‚OODF æ˜¯ä½œä¸ºæ–¹å‘å‡½æ•°çš„æ°´æ‰©æ•£åˆ†å¸ƒã€‚ODFçš„å³°å€¼æ˜¯å›¾åƒä¸­æŸä¸€ç‚¹ä¸ŠæŸæ®µ(tract segments)æ–¹å‘çš„è‰¯å¥½ä¼°è®¡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨peaks_from_modelæ¥æ‹Ÿåˆæ•°æ®ï¼Œå¹¶è®¡ç®—ç™½è´¨æ‰€æœ‰ä½“ç´ ä¸­çš„çº¤ç»´æ–¹å‘ã€‚\næ­¥éª¤äºŒ. è¯†åˆ«è¿½è¸ªä½•æ—¶å¿…é¡»åœæ­¢çš„æ–¹æ³•\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æŸç§æ–¹æ³•å°†çº¤ç»´è¿½è¸ªé™åˆ¶åœ¨å…·æœ‰è‰¯å¥½æ–¹å‘æ€§ä¿¡æ¯çš„åŒºåŸŸã€‚æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ç™½è´¨æ©ç (white mask)ï¼Œä½†æˆ‘ä»¬å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œé€šè¿‡å¯¹å¹¿ä¹‰åˆ†æ•°å„å‘å¼‚æ€§ï¼ˆGFA,generalized fractional anisotropyï¼‰è¿›è¡Œé˜ˆå€¼å¤„ç†ï¼Œå°†çº¤ç»´è¿½è¸ªé™åˆ¶åœ¨é‚£äº›ODFæ˜¾ç¤ºå‡ºæ˜æ˜¾é™åˆ¶æ€§æ‰©æ•£çš„åŒºåŸŸã€‚\næ­¥éª¤ä¸‰. è®¾ç½®è¿½è¸ªç§å­(seed)\nåœ¨æˆ‘ä»¬å¼€å§‹è¿½è¸ªä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šåœ¨å“ªé‡Œ \u0026ldquo;seed\u0026rdquo;ï¼ˆå¼€å§‹ï¼‰çº¤ç»´è¿½è¸ªã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé€‰æ‹©çš„ç§å­å°†å–å†³äºäººä»¬æ„Ÿå…´è¶£çš„å»ºæ¨¡è·¯å¾„ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨èƒ¼èƒä½“çš„çŸ¢çŠ¶åˆ‡é¢ä¸Šä½¿ç”¨ä¸€ä¸ªæ¯ä¸ªä½“ç´ çš„2x2x2çš„ç½‘æ ¼ç§å­ã€‚ä»è¿™ä¸ªåŒºåŸŸè¿›è¡Œè¿½è¸ªå°†ç»™æˆ‘ä»¬ä¸€ä¸ªèƒ¼èƒä½“æŸçš„æ¨¡å‹ã€‚è¿™ä¸ªåˆ‡ç‰‡åœ¨æ ‡ç­¾çš„å›¾åƒä¸­å…·æœ‰æ ‡ç­¾å€¼2ã€‚\nä½¿ç”¨EuDXç®—æ³•æ„å»ºä¸€ä¸ªç¡®å®šæ€§çš„çº¤ç»´æŸæµçº¿(streamlines)ã€‚ æ‰€è°“çš„ç¡®å®šæ€§(deterministic)è¡¨ç¤ºå¦‚æœä½ é‡å¤çº¤ç»´è·Ÿè¸ªï¼ˆä¿æŒæ‰€æœ‰è¾“å…¥ç›¸åŒï¼‰ï¼Œä½ å°†å¾—åˆ°å®Œå…¨ç›¸åŒçš„ä¸€ç»„çº¤ç»´æŸæµçº¿ã€‚\nJupyterå·²çœç•¥éƒ¨åˆ†å†…å®¹ï¼Œè¯·ç‚¹å‡»è¿™é‡Œå…¨å±æ˜¾ç¤º ä½¿ç”¨csdeconv.mask_for_response_ssst()å‡½æ•°æ¥è·å–æ¯ä¸ªä½“ç´ çš„å„å‘å¼‚æ€§é…ç½®ï¼ˆvery anisotropic configurationsï¼‰çš„ä¿¡æ¯ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›æ‰€é€‰ä½“ç´ çš„maskã€‚ é€šè¿‡è¿™ä¸ªmaskï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡csdeconv.response_from_mask_ssst()å‡½æ•°è®¡ç®—å“åº”å‡½æ•°ã€‚\nload_nifti_data()å’Œload_nifti()å‡½æ•°çš„åŒºåˆ«:\nload_nifti_data()åªåŠ è½½niftiå†…çš„data arrayã€‚\nload_nifti()é™¤äº†åŠ è½½data array,è¿˜è¦æŠŠå…¶ä»–ä¿¡æ¯ä¹ŸåŠ è½½è¿›æ¥ï¼ˆdata, img.affine, img, vox_size, nib.aff2axcodes(img.affine)ï¼‰ã€‚\næ–¹å‘åœºï¼ˆDirection Fieldï¼‰å›¾å¦‚ä½•çœ‹ï¼Ÿ\nx - Red - æ–¹å‘åœºå›¾ä¸­ä¸ºçº¢è‰²æ ‡è¯†\ny - Green - æ–¹å‘åœºå›¾ä¸­ä¸ºç»¿è‰²æ ‡è¯†\nz - Blue- æ–¹å‘åœºå›¾ä¸­ä¸ºè“è‰²æ ‡è¯†\n"
},
{
	"uri": "https://LiaoPan.github.io/datasets/",
	"title": "è„‘ç›¸å…³æ•°æ®é›†",
	"tags": [],
	"description": "",
	"content": "æ•°æ®é›† åœ¨æˆ‘ä»¬å­¦ä¹ ç›¸å…³è½¯ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œå®˜ç½‘æœ¬èº«ä¼šæä¾›ä¸€äº›ç”¨äºå®è·µçš„æ•°æ®é›†ï¼Œè¿™äº›æ•°æ®é›†ç”¨æ¥ç»™å¤§å®¶å°è¯•ã€å­¦ä¹ ä½¿ç”¨ã€‚ æœ¬æ–‡ä¼šè®°å½•æ€»ç»“å¸¸ç”¨çš„ç›¸å…³æ•°æ®é›†ï¼Œä¾›å¤§å®¶æ–¹ä¾¿ä¸‹è½½ä½¿ç”¨ï¼Œæ–¹ä¾¿åç»­å¤§å®¶è·Ÿç€æ•™ç¨‹ä¸€èµ·å®è·µã€‚\nSPMç›¸å…³æ•°æ®é›†ä¸‹è½½åœ°å€: www.fil.ion.ucl.ac.uk/spm/data/\nç®€ä»‹ï¼š æä¾›åœ¨å­¦ä¹ SPMæ•™ç¨‹è¿‡ç¨‹çš„æ•°æ®é›†\nOpeneuro(æ¨è): openneuro.org\nç®€ä»‹ï¼š æä¾›åŒ…æ‹¬MEGã€EEGã€PETã€MRIã€fMRIç­‰æ¨¡æ€çš„å¼€æºæ•°æ®é›†ä¸‹è½½ã€‚\nOpenfmri: openfmri.org\nç®€ä»‹ï¼š æä¾›fMRIçš„å¼€æºæ•°æ®é›†ä¸‹è½½ã€‚\nDIPY: dipy.org\nç®€ä»‹ï¼š æä¾›çº¤ç»´æŸç›¸å…³çš„å¼€æºæ•°æ®é›†ä¸‹è½½ã€‚\n"
},
{
	"uri": "https://LiaoPan.github.io/freesurfer/basic/",
	"title": "FreeSurferæ•™ç¨‹ #2. FreeSurferè¾“å‡ºç»“æœä¸FreeViewå¯è§†åŒ–",
	"tags": [],
	"description": "",
	"content": " 0. æœ¬æ–‡çŸ¥è¯†ç‚¹æ±‡æ€» 1. æ•™ç¨‹æ•°æ®å‡†å¤‡ FreeSurfer çš„è¾“å‡ºç»“æœ ä½¿ç”¨FreeViewæ¥å›¾ç‰‡æŸ¥çœ‹Volumes ä½¿ç”¨FreeViewæ¥3DæŸ¥çœ‹Surfaces å‚è€ƒèµ„æ–™ 0. æœ¬æ–‡çŸ¥è¯†ç‚¹æ±‡æ€» FreeSurferè¾“å‡ºç»“æœçš„ç®€å•ç†è§£ ä½¿ç”¨FreeViewå¯¹FreeSurferçš„ç»“æœï¼ˆVolumesã€Surfacesï¼‰è¿›è¡Œå¯è§†åŒ–æŸ¥çœ‹ 1. æ•™ç¨‹æ•°æ®å‡†å¤‡ åœ¨FsTutorial_Dataä¸‹è½½ç›¸å…³æ•™ç¨‹çš„æµ‹è¯•æ•°æ®ï¼Œå¤§æ¦‚8GBã€‚\nä½¿ç”¨å‘½ä»¤è¡Œä¸‹è½½ç›¸å…³æ•™ç¨‹æ•°æ®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®ç½‘å€ä¸‹è½½ï¼Œç„¶åè§£å‹ã€‚\ncurl https://surfer.nmr.mgh.harvard.edu/pub/data/tutorial_data.tar.gz -o tutorial_data.tar.gz tar -xzvf tutorial_data.tar.gz rm tutorial_data.tar.gz export TUTORIAL_DATA=/path/to/your/tutorial/dir # å®šä¹‰ç¯å¢ƒå˜é‡TUTORIAL_DATA ls $TUTORIAL_DATA buckner_data fsfast-functional diffusion_recons fsfast-tutorial.subjects diffusion_tutorial long-tutorial FreeSurfer çš„è¾“å‡ºç»“æœ surf æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆ . whiteã€. sphereã€. inflated ç­‰ç½‘æ ¼ç‚¹æ–‡ä»¶ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶é‡Œé¢éƒ½å­˜å‚¨äº†å¤§è„‘çš®è´¨è¡¨é¢ç½‘æ ¼ç‚¹çš„ä¸‰ç»´åæ ‡åŠç›¸é‚»é¡¶ç‚¹æ„æˆçš„ä¸‰è§’é¢ç‰‡ä¿¡æ¯ã€‚\nsurf æ–‡ä»¶å¤¹ä¸‹ç”ŸæˆåŸºäºæ›²é¢çš„å½¢æ€ç‰¹å¾æ•°æ®ï¼Œä¸åŒçš„ç‰¹å¾é‡‡ç”¨ä¸åŒçš„æ–‡ä»¶åç¼€åï¼Œ\nçš®è´¨åšåº¦ï¼ˆ . thickness ï¼‰ é›…å¯æ¯”åº¦é‡ï¼ˆ. jacobian. whiteï¼‰ è„‘æ²Ÿï¼ˆ . sulc ï¼‰ æ›²ç‡ï¼ˆ. curvï¼‰ å¤–è¡¨é¢ç§¯ï¼ˆ. areaï¼‰ ä½“ç§¯ï¼ˆ. volumeï¼‰ç­‰é¢æ•°æ®æ–‡ä»¶ï¼Œå…¶åæ ‡ç´¢å¼•å·ä¸ Mesh ç½‘æ ¼åºå·ä¸€è‡´ã€‚ **stats **æ–‡ä»¶å¤¹ä¸‹ï¼Œå¯¹äºæ¯ä¸ªè„‘å›¾è°±(atlas)éƒ½æœ‰ä¸€ä¸ªåˆ†åŒºç»“æœ(parcellations)ã€‚æ¯”å¦‚ï¼Œ\nlh.aparc.annotï¼Œä½¿ç”¨Desikan-Killianyå›¾è°±çš„å·¦åŠçƒçš„åˆ†åŒºç»“æœï¼›\nlh.aparc.a2009s.annot,ä½¿ç”¨Destrieuxå›¾è°±çš„å·¦åŠçƒåˆ†åŒºç»“æœï¼›\naseg.statsåŒ…å«äº†æ‰€æœ‰å›¾è°±çš„åˆ†å‰²ç»“æœã€‚å¦‚æœæƒ³çŸ¥é“æ€ä¹ˆæå–è¿™äº›ä¿¡æ¯ï¼Œè¯·è·³è½¬ã€‚\nDesikan-Killianyå›¾è°±ä¸Destrieuxå›¾è°±çš„åŒºåˆ«åœ¨äºï¼ŒDestrieuxå›¾è°±åŒ…å«æ›´å¤šçš„åˆ†åŒºï¼Œå¯ä»¥é€‚ç”¨äºæ›´åŠ ç²¾ç»†åŒ–çš„åˆ†æã€‚ ä½¿ç”¨FreeViewæ¥å›¾ç‰‡æŸ¥çœ‹Volumes freeview -v \\ good_output/mri/T1.mgz \\ good_output/mri/wm.mgz \\ good_output/mri/brainmask.mgz \\ good_output/mri/aseg.mgz:colormap=lut:opacity=0.2 \\ -f good_output/surf/lh.white:edgecolor=blue \\ good_output/surf/lh.pial:edgecolor=red \\ good_output/surf/rh.white:edgecolor=blue \\ good_output/surf/rh.pial:edgecolor=red -v ç”¨äºåŠ è½½volumes; -f ç”¨äºåŠ è½½surfaces; æ›´å¤šè¯¦ç»†äº†è§£ï¼Œè¯·å‚è€ƒå®˜ç½‘æ•™ç¨‹\nä½¿ç”¨FreeViewæ¥3DæŸ¥çœ‹Surfaces ä¸‹è¿°Surfaceséƒ½å¯ä»¥ä½¿ç”¨FreeViewè¿›è¡ŒæŸ¥çœ‹ã€‚\npial(è½¯è†œ), white(ç™½è´¨) and inflated surface(è†¨èƒ€è¡¨é¢) sulcal(è„‘æ²Ÿ) and curvature maps(æ›²ç‡å›¾) thickness maps(åšåº¦å›¾) cortical parcellation(çš®è´¨åˆ†å‰²) freeview -f good_output/surf/lh.pial:annot=aparc.annot:name=pial_aparc:visible=0 \\ good_output/surf/lh.pial:annot=aparc.a2009s.annot:name=pial_aparc_des:visible=0 \\ good_output/surf/lh.inflated:overlay=lh.thickness:overlay_threshold=0.1,3::name=inflated_thickness:visible=0 \\ good_output/surf/lh.inflated:visible=0 \\ good_output/surf/lh.white:visible=0 \\ good_output/surf/lh.pial \\ --viewport 3d å‚æ•°ä»¥:+\u0026lt;cmd\u0026gt;=è¿›è¡Œé—´éš”åŒºåˆ†,æ¯”å¦‚:annot=ã€:name=ã€:overlay=ã€:overlay_threshold=ï¼›\nlh.pial:annot=aparc.annotè¡¨ç¤ºåœ¨pialè¡¨é¢ä¸ŠåŠ è½½Desikan-Killianyçš®è´¨åˆ†åŒºï¼› lh.pial:annot=aparc.a2009s.annotè¡¨ç¤ºåœ¨pialè¡¨é¢åŠ è½½Destrieuxçš®è´¨åˆ†åŒºï¼› :name=pial_aparc:visible=0 è¡¨ç¤ºæ›´æ”¹æ˜¾ç¤ºåç§°å¹¶å…³é—­è¯¥å±‚æ˜¾ç¤ºï¼› lh.inflated:overlay=lh.thickness:overlay_threshold=0.1,3è¡¨ç¤ºåŠ è½½è†¨èƒ€è¡¨é¢é¡¶éƒ¨çš„åšåº¦å åŠ å±‚å¹¶è®¾ç½®è¦æ˜¾ç¤ºçš„æœ€å°å’Œæœ€å¤§é˜ˆå€¼ï¼›\nç»¿è‰²åŒºåŸŸæ˜¯è„‘å›ï¼Œçº¢è‰²åŒºåŸŸæ˜¯è„‘æ²Ÿ ä¸Šå›¾ä¸ºDesikan-Killiany Cortical Parcellation ä¸Šå›¾ä¸ºDestrieux Cortical Parcellation ä¸Šè¿°çš®è´¨åˆ†å‰²å¯é€šè¿‡recon-allæ¥ç”Ÿæˆï¼Œå¯¹åº”å‘½ä»¤ä¸ºï¼š ?h.aparc.annot:\nDesikan-Killiany atlas ?h.aparc.a2009s.annot:\nDestrieux atlas FreeViewçš„ç®€å•ä½¿ç”¨æ–¹æ³•ï¼Œä¸éœ€è¦æ¯æ¬¡åœ¨ç»ˆç«¯å‘½ä»¤è¡Œè¾“å…¥å‘½ä»¤æ¥æŒ‡å®šæ‰“å¼€ä»€ä¹ˆæ–‡ä»¶ä»¥åŠå±•ç¤ºå±æ€§ï¼Œè€Œæ˜¯ä»…è¾“å…¥freeviewæ‰“å¼€UIç•Œé¢ï¼Œç‚¹å‡»æ“ä½œå³å¯ï¼Œæ–¹ä¾¿åˆå¿«æ·ï¼\næ›´å¤šç»†èŠ‚å‚è€ƒå’Œç»ƒä¹ ï¼Œè¯·è®¿é—®FreeviewGuide\nFreeSurfer é‡‡ç”¨çš„æ˜¯ RAS åæ ‡ç³»ï¼Œå…¶æ„ä¹‰ä¸º Rï¼šrightï¼ŒX è½´æ­£æ–¹å‘ï¼›Aï¼šanteriorï¼ŒY è½´æ­£æ–¹å‘ï¼›Sï¼šsuperiorï¼ŒZ è½´æ­£æ–¹å‘ã€‚\nå‚è€ƒèµ„æ–™ å®˜ç½‘ Freesurferæºç  å®˜ç½‘ä½¿ç”¨æ‰‹å†Œ ä¸­æ–‡ä½¿ç”¨æ‰‹å†Œ FreeSurferå®˜ç½‘æ•™ç¨‹ FreeSurfer Ouputs "
},
{
	"uri": "https://LiaoPan.github.io/dipy/",
	"title": "DIPYç³»åˆ—æ•™ç¨‹",
	"tags": [],
	"description": "",
	"content": "DIPYç®€ä»‹ DIPYæ˜¯Pythonä¸­æ ‡å‡†çš„3D/4Dæˆåƒåº“ï¼ŒåŒ…å«ç©ºé—´å½’ä¸€åŒ–ã€ä¿¡å·å¤„ç†ã€æœºå™¨å­¦ä¹ ã€ç»Ÿè®¡åˆ†æå’ŒåŒ»å­¦å›¾åƒå¯è§†åŒ–çš„é€šç”¨æ–¹æ³•ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜åŒ…å«è®¡ç®—è§£å‰–å­¦çš„ä¸“é—¨æ–¹æ³•ï¼ŒåŒ…æ‹¬æ‰©æ•£ã€çŒæ³¨å’Œç»“æ„æˆåƒã€‚\nDIPYåŠŸèƒ½ å‘½ä»¤è¡Œæ¥å£ æ‰€æœ‰ç®—æ³•éƒ½å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼è°ƒç”¨ åˆ›å»ºè‡ªå·±çš„å‘½ä»¤è¡Œ ç»Ÿè®¡åˆ†æ BUAN AFQ KæŠ˜äº¤å‰éªŒè¯ é‡æ„ Single Shell:DTI, CSA, SFM, SDT, Q-Ball, CSD, \u0026hellip; Multi-Shell:GQI, DTI, DKI, SHORE, MAPMRI, MSMT-CSD, \u0026hellip; é…å‡† ä»¿å°„å˜æ¢ 2D/3Då¾®åˆ†åŒèƒšé…å‡†ï¼ˆDiffeomorphic 2D/3D Registrationï¼‰ çº¤ç»´æŸæˆåƒ æ¦‚ç‡æ€§çº¤ç»´æŸè¿½è¸ª ç¡®å®šæ€§çº¤ç»´æŸè¿½è¸ª PFTçº¤ç»´æŸè¿½è¸ª å»å™ª Patch2self Gibbs Unringing LPCA - MPPCA Non Local Means å¯è§†åŒ– ODFså¯è§†åŒ– äº¤äº’å¼çš„çº¤ç»´æŸå¯è§†åŒ– é¢„å¤„ç† Brain extraction SNR estimation Reslice Datasets å®‰è£…æ–¹å¼ $ pip install nibabel # ç”¨äºè¯»å†™ç¥ç»å½±åƒæ•°æ® $ pip install dipy $ pip install fury # æŸäº›å¯è§†åŒ–ä¾èµ–åº“ å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨condaæ–¹å¼è¿›è¡Œå®‰è£…ã€‚\næ›´å¤šå®‰è£…æ•™ç¨‹ï¼Œè¯·å‚è€ƒå®˜ç½‘\nå¦‚æœçœ‹åˆ°è¿™ä¸çŸ¥é“ä»€ä¹ˆæ˜¯pipæˆ–è€…condaï¼Œå¯ä»¥å»å­¦ä¹ ä¸€ä¸‹pythonç›¸å…³åŸºç¡€ã€‚\næ•™ç¨‹æ•°æ®ä¸‹è½½ ä½¿ç”¨pythonä»£ç ä¸‹è½½ï¼Œæ•°æ®é›†é»˜è®¤ä¼šä¸‹è½½åœ¨ä¸»ç›®å½•ä¸‹çš„.dipyç›®å½•å†…ã€‚ Jupyterå·²çœç•¥éƒ¨åˆ†å†…å®¹ï¼Œè¯·ç‚¹å‡»è¿™é‡Œå…¨å±æ˜¾ç¤º å°½é‡ä¸è¦ä½¿ç”¨jupyteræ¥æ‰§è¡Œä¸Šè¿°å‘½ä»¤ä¸‹è½½æ•°æ®ï¼Œå› ä¸ºç›®å‰jupyterçš„ä¸‹è½½è¿›åº¦æ”¯æŒä¸å¥½ï¼Œæ— æ³•æŸ¥çœ‹ä¸‹è½½æ˜¯å¦å·²å®Œæˆä¸”å®¹æ˜“åƒµä½ã€‚\nä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·ä¸‹è½½,é€‰æ‹©ç‰¹å®šç›®å½•ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å³å¯(æ¨è) $ dipy_fetch list # æŸ¥çœ‹æ‰€æœ‰å¯ä½¿ç”¨çš„æ•°æ®é›† INFO:Please, select between the following data names: bundle_atlas_hcp842, bundle_fa_hcp, bundles_2_subjects, cenir_multib, cfin_multib, file_formats, fury_surface, gold_standard_io, isbi2013_2shell, ivim, mni_template, qtdMRI_test_retest_2subjects, qte_lte_pte, resdnn_weights, scil_b0, sherbrooke_3shell, stanford_hardi, stanford_labels, stanford_pve_maps, stanford_t1, syn_data, taiwan_ntu_dsi, target_tractogram_hcp, tissue_data $ dipy_fetch {specific_dataset} --out_dir {specific_data_out_folder} # é€‰æ‹©ç‰¹å®šæ•°æ®é›†ï¼Œä¸‹è½½åˆ°ç‰¹å®šç›®å½•ï¼Œæ³¨æ„{}å†…å†…å®¹éœ€è¦æ›¿æ¢ã€‚ $ dipy_fetch sherbrooke_3shell --out_dir . # ä¸¾ä¾‹ï¼Œå°†sherbrooke_3shellæ•°æ®é›†ä¸‹è½½åˆ°å½“å‰ç›®å½•ã€‚ ä½¿ç”¨dipy_fetchæ—¶ï¼Œ\u0026ndash;out_dirä¸å†™ï¼Œå³ä¸‹è½½åˆ°é»˜è®¤ç›®å½•ä¸‹(~/.dipy)\næ³¨æ„ 1: ä¸éœ€è¦é©¬ä¸Šä¸‹è½½ä¸Šè¿°æ‰€æœ‰æ•°æ®é›†ï¼Œåœ¨åç»­æ•™ç¨‹ä¸­ï¼Œä¼šé™†ç»­ä½¿ç”¨å‘½ä»¤ä¸‹è½½æ•™ç¨‹ç›¸å…³æ•°æ®ã€‚ æ³¨æ„ 2: åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°æŠ¥500é”™è¯¯(HTTP Error 500: Internal Server Error)çš„æƒ…å†µï¼Œé‡æ–°å¼€å§‹å³å¯ã€‚\n"
},
{
	"uri": "https://LiaoPan.github.io/mrtrix/",
	"title": "MRtrix3ç³»åˆ—æ•™ç¨‹",
	"tags": [],
	"description": "",
	"content": " ç®€ä»‹ ä¸‹è½½å®‰è£… æ ¡éªŒæ˜¯å¦å®‰è£…æˆåŠŸ ç®€ä»‹ MRtrix3æä¾›äº†ä¸€å¥—å·¥å…·æ¥è¿›è¡Œå„ç§ç±»å‹çš„å¼¥æ•£MRIåˆ†æï¼Œä»å„ç§å½¢å¼çš„çº¤ç»´æŸæˆåƒåˆ°ä¸‹ä¸€ä»£çš„ç»„æ°´å¹³åˆ†æã€‚å®ƒçš„è®¾è®¡è€ƒè™‘åˆ°äº†ä¸€è‡´æ€§ã€æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œå¹¶ä»¥å¼€æºè®¸å¯çš„æ–¹å¼å…è´¹æä¾›ã€‚å®ƒæ˜¯ç”±è¯¥é¢†åŸŸçš„ä¸“å®¶å›¢é˜Ÿå¼€å‘å’Œç»´æŠ¤çš„ï¼ŒåŸ¹å…»äº†ä¸€ä¸ªç”±ä¸åŒèƒŒæ™¯çš„ç”¨æˆ·ç»„æˆçš„æ´»è·ƒç¤¾åŒºã€‚\nä¸ä¸»è¦å›¾åƒæ ¼å¼æ— ç¼äº¤äº’ FOD-basedï¼ˆFiber Orientation Distributionsï¼ŒFODï¼‰ DEC maps and panchromatic sharpening ä¸‹è½½å®‰è£… è®¿é—®MRtrixçš„ä¸‹è½½åœ°å€,é€‰æ‹©ä¸åŒå¹³å°è¿›è¡Œå®‰è£…å³å¯ã€‚\nmacOS Linux sudo bash -c \u0026#34;$(curl -fsSL https://raw.githubusercontent.com/MRtrix3/macos-installer/master/install)\u0026#34; è¯¥è„šæœ¬ä¼šè‡ªåŠ¨ä¸‹è½½MRtrix3è½¯ä»¶çš„æœ€æ–°çš„äºŒè¿›åˆ¶å‘å¸ƒç‰ˆæœ¬ï¼Œè§£å‹åˆ°/usr/local/mrtrix3ç›®å½•ä¸‹ã€‚\n$ conda install -c mrtrix3 mrtrix3 å‰æï¼Œéœ€è¦å…ˆå®‰è£…anaconda (or miniconda)ã€‚\nå¦‚æœç¢°åˆ°macOSå®‰è£…æ—¶ï¼Œæ— æ³•æ­£å¸¸ä¸‹è½½installè„šæœ¬ï¼Œå¯ä»¥é€šè¿‡ç½‘é¡µè®¿é—®raw.githubusercontent.com/MRtrix3/macos-installer/master/installï¼Œç„¶åè‡ªå·±åˆ›å»ºæ–‡ä»¶è¿›è¡Œå®‰è£…ã€‚ä¸‹é¢æ˜¯æˆ‘å®‰è£…æ—¶çš„installè„šæœ¬å†…å®¹ã€‚\n#!/bin/bash -e tag=$(basename $(/usr/bin/curl -Ls -o /dev/null -w %{url_effective} https://github.com/MRtrix3/mrtrix3/releases/latest)) if [ -z \u0026#34;${tag}\u0026#34; ]; then echo \u0026#34;ERROR: could not find tag name for latest release ...\u0026#34; exit fi if [ \u0026#34;$1\u0026#34; != \u0026#34;-f\u0026#34; ]; then echo \u0026#34;This installer will download MRtrix ${tag} and install it to /usr/local/mrtrix3.\u0026#34; echo \u0026#34;In addition it will:\u0026#34; echo \u0026#34;* create symbolic links in /usr/local/bin to the binaries in /usr/local/mrtrix3/bin\u0026#34; echo \u0026#34;* create symbolic links in /Applications to the app bundles in /usr/local/mrtrix3/bin\u0026#34; fi if [ $EUID != 0 ]; then echo \u0026#34;ERROR: This script requires root privileges, please run as: sudo \u0026#34;$0\u0026#34; \u0026#34;$@\u0026#34;\u0026#34; exit fi if [ -d \u0026#34;/usr/local/mrtrix3\u0026#34; ] || [ -L \u0026#34;/usr/local/mrtrix3\u0026#34; ] ; then echo \u0026#34;WARNING: /usr/local/mrtrix3 already exists and will be replaced during installation.\u0026#34; fi if [ \u0026#34;$1\u0026#34; != \u0026#34;-f\u0026#34; ]; then while true; do read -p \u0026#34;Are you sure you want to continue? [y/n] \u0026#34; yn case $yn in [Yy]* ) break;; [Nn]* ) exit;; esac done fi if [ ! -d \u0026#34;/usr/local/bin\u0026#34; ]; then if [ -e \u0026#34;/usr/local/bin\u0026#34; ]; then echo \u0026#34;WARNING: /usr/local/bin is not a directory, cannot create symlinks\u0026#34; else echo \u0026#34;WARNING: /usr/local/bin does not exist, creating it for you.\u0026#34; mkdir -p -m 755 /usr/local/bin fi fi url=https://github.com/MRtrix3/mrtrix3/releases/download/${tag}/mrtrix3-macos-${tag}.tar.gz if [ -z \u0026#34;${url}\u0026#34; ]; then echo \u0026#34;ERROR: Could not find tarball of latest release ...\u0026#34; exit fi echo \u0026#34;Downloading \u0026#34;${url}\u0026#34; ...\u0026#34; /usr/bin/curl -sL \u0026#34;${url}\u0026#34; -O tarball=$(basename \u0026#34;${url}\u0026#34;) if [ ! -f \u0026#34;${tarball}\u0026#34; ]; then echo \u0026#34;ERROR: Download not sucessful ...\u0026#34; exit fi if [ -f /usr/local/mrtrix3/symlinks ]; then echo \u0026#34;Removing symbolic links of previous installation ...\u0026#34; for l in $(cat /usr/local/mrtrix3/symlinks); do if [ -L \u0026#34;${l}\u0026#34; ]; then unlink \u0026#34;${l}\u0026#34; fi done fi if [ -d \u0026#34;/usr/local/mrtrix3\u0026#34; ] || [ -L \u0026#34;/usr/local/mrtrix3\u0026#34; ] ; then echo \u0026#34;Removing previous installation in /usr/local/mrtrix3 ...\u0026#34; rm -rf \u0026#34;/usr/local/mrtrix3\u0026#34; fi for l in /usr/local/bin/*; do if [ -L \u0026#34;${l}\u0026#34; ]; then t=\u0026#34;$(readlink \u0026#34;${l}\u0026#34;)\u0026#34; if [[ \u0026#34;${t}\u0026#34; == *\u0026#34;mrtrix3\u0026#34;* ]]; then echo \u0026#34;WARNING: Removing symbolic link \u0026#34;${l}\u0026#34; to \u0026#34;${t}\u0026#34; (conflicting homebrew installation?) ...\u0026#34; unlink \u0026#34;${l}\u0026#34; fi fi done echo \u0026#34;Unpacking \u0026#34;${tarball}\u0026#34; to /usr/local/mrtrix3 ...\u0026#34; tar oxf \u0026#34;${tarball}\u0026#34; -C /usr/local rm \u0026#34;${tarball}\u0026#34; echo \u0026#34;Fixing python shebang ...\u0026#34; cd /usr/local/mrtrix3/bin for f in $(grep -lr \u0026#39;^#!/usr/bin/env python\u0026#39;); do sed -i \u0026#39;\u0026#39; \u0026#39;s|^#!/usr/bin/env python$|#!/usr/bin/python3|\u0026#39; ${f} done echo \u0026#34;Applying patch to show correct version numbers in scripts ...\u0026#34; cd /usr/local/mrtrix3 curl -s https://github.com/MRtrix3/mrtrix3/commit/4a293d30e1c0686037ae637f67932d497eb71ee6.patch | patch -s -p1 echo \u0026#34;Creating symlinks in /usr/local/bin ...\u0026#34; cd /usr/local/bin touch /usr/local/mrtrix3/symlinks for target in $(find ../mrtrix3/bin -maxdepth 1 -type f ! -name \u0026#34;*.*\u0026#34;); do ln -sf \u0026#34;${target}\u0026#34; echo /usr/local/bin/\u0026#34;$(basename \u0026#34;${target}\u0026#34;)\u0026#34; \u0026gt;\u0026gt; /usr/local/mrtrix3/symlinks done echo \u0026#34;Creating symlinks in /Applications ...\u0026#34; cd /Applications for target in /usr/local/mrtrix3/bin/*.app; do ln -sf \u0026#34;${target}\u0026#34; echo /Applications/\u0026#34;$(basename \u0026#34;${target}\u0026#34;)\u0026#34; \u0026gt;\u0026gt; /usr/local/mrtrix3/symlinks done if [[ $SHELL = \u0026#34;/bin/zsh\u0026#34; ]]; then profile=~/.zprofile; else profile=~/.bash_profile; fi echo \u0026#34;$PATH\u0026#34; | grep -q \u0026#39;/usr/local/bin:\u0026#39; || printf \u0026#34;WARNING: /usr/local/bin is not in PATH. You can add it to the PATH with:\\necho \u0026#39;export PATH=/usr/local/bin:\\$PATH\u0026#39; \u0026gt;\u0026gt; ${profile}\\n\u0026#34; echo \u0026#34;Installation complete!\u0026#34; $ touch install #åˆ›å»ºè„šæœ¬æ–‡ä»¶ï¼Œç„¶åç²˜è´´ä¸Šè¿°è„šæœ¬å†…å®¹ã€‚ $ chmod +x install $ sudo ./install # æ‰§è¡Œå®‰è£…,è‹¥å› ä¸ºgithubçš„åŸå› å¯¼è‡´æ— æ³•ä¸‹è½½ï¼Œå»ºè®®åœ¨terminalå†…é…ç½®githubä»£ç†ï¼Œæˆ–è€…æ‰‹åŠ¨ä¸‹è½½è½¯ä»¶åŒ…ï¼Œä¿®æ”¹installè„šæœ¬,è®©å…¶è¯»å–æœ¬åœ°å·²ä¸‹è½½çš„è½¯ä»¶åŒ…å®‰è£…å³å¯ã€‚ æ ¡éªŒæ˜¯å¦å®‰è£…æˆåŠŸ æ–°èµ·ä¸€ä¸ªterminalï¼Œéšæ„é€‰æ‹©MRtrixçš„å‘½ä»¤ï¼Œè¾“å…¥éƒ¨åˆ†å‘½ä»¤ï¼Œæ¯”å¦‚dwi2,ç„¶åæŒ‰tabé”®ï¼Œè¾“å…¥dwi2mask -h,å¦‚æœå¯ä»¥æ­£å¸¸æ˜¾ç¤ºå‘½ä»¤,é‚£ä¹ˆå°±åº”è¯¥å®‰è£…æˆåŠŸäº†ã€‚\n$ dwi2mask -h dwi2mask: part of the MRtrix3 package SYNOPSIS Generates a whole brain mask from a DWI image USAGE dwi2mask [ options ] input output input the input DWI image containing volumes that are both diffusion weighted and b=0 output the output whole-brain mask image DESCRIPTION All diffusion weighted and b=0 volumes are used to obtain a mask that includes both brain tissue and CSF. å®˜ç½‘åœ°å€ - GitHubæºç åœ°å€ - MRtrixå®˜ç½‘æ–‡æ¡£åœ°å€\n"
},
{
	"uri": "https://LiaoPan.github.io/afni/",
	"title": "AFNIç³»åˆ—æ•™ç¨‹",
	"tags": [],
	"description": "",
	"content": " åœ¨fMRIç›¸å…³åˆ†æè½¯ä»¶ä¸­ï¼ŒAFNIæ˜¯æœ€éš¾å­¦ä¹ çš„ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æ²¡å­¦æ‡‚ï¼Œå’±å¤šçœ‹çœ‹ã€å¤šå®è·µï¼Œä¸ç”¨å®³æ€•å»å°è¯•å®ƒã€‚\nä»‹ç» AFNI (Analysis of Functional NeuroImages)æ˜¯ä¸€ä¸ªé¢†å…ˆçš„åŠŸèƒ½ç¥ç»å›¾åƒåˆ†æè½¯ä»¶å¥—ä»¶ï¼ŒåŒ…å« Cã€Pythonã€R ç¨‹åºå’Œ shell è„šæœ¬ï¼Œä¸»è¦å¼€å‘ç”¨äºåˆ†æå’Œæ˜¾ç¤ºå¤šç§ MRI æ¨¡æ€ï¼šè§£å‰–ã€åŠŸèƒ½ MRI (FMRI) å’Œæ‰©æ•£åŠ æƒ (DWI) æ•°æ®ã€‚å®ƒæ˜¯å…è´¹æä¾›çš„ï¼ˆä½œä¸ºå¼€æºä»£ç å’Œé¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ç”¨äºç ”ç©¶ç›®çš„ã€‚è¯¥è½¯ä»¶å‡ ä¹å¯ä»¥åœ¨ä»»ä½•å¸¦æœ‰ X11 å’Œ Motif æ˜¾ç¤ºçš„ Unix ç³»ç»Ÿä¸Šè¿è¡Œã€‚ä¸º MacOS å’Œ Linux ç³»ç»Ÿæä¾›äºŒè¿›åˆ¶åŒ…ï¼Œä¾‹å¦‚ Fedoraã€CentOS/Red Hat å’Œ Ubuntuï¼ˆåŒ…æ‹¬ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿï¼‰ã€‚\nAFNIèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ APQC: afni_proc.pyè´¨é‡æ§åˆ¶ å¸®åŠ©ç ”ç©¶è€…æ£€æŸ¥å·²å¤„ç†è¿‡çš„æ•°æ®ã€‚\ngraph LR a(AFNIåŸºæœ¬æ“ä½œ)--\u0026gt;b(æ•°æ®é¢„å¤„ç†) a(AFNIåŸºæœ¬æ“ä½œ)--\u0026gt;d(æ—¶é—´æ ¡æ­£) a(AFNIåŸºæœ¬æ“ä½œ)--\u0026gt;c(å¤´åŠ¨æ ¡æ­£) a--\u0026gt;f(ç©ºé—´é…å‡†) a--\u0026gt;e(ç©ºé—´å¹³æ»‘å’Œæ—¶é—´åºåˆ—çš„æ ‡æ³¨åŒ–) a--\u0026gt;g(ä¸€èˆ¬çº¿æ€§æ¨¡å‹) a--\u0026gt;h(ç»„åˆ†æ) æ—¶é—´æ ¡æ­£ åœ¨MRIæ‰«æè¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š\né¡ºåºåˆ‡ç‰‡é‡‡é›† æŒ‰ç…§é¡ºåºä»ä¸Šåˆ°ä¸‹ã€ä»ä¸‹åˆ°ä¸Šè¿›è¡Œé‡‡é›†ã€‚\näº¤é”™åˆ‡ç‰‡é‡‡é›† æ¯é‡‡é›†ä¸€å¼ åˆ‡ç‰‡åéš”ä¸€å¼ å†é‡‡é›†ï¼Œç„¶åç¬¬äºŒéè¿›è¡Œé—´éš™å¡«å……ã€‚\nå³ä»æ‰«æå¼€å§‹çš„ç¬¬ä¸€ä¸ªåˆ‡ç‰‡åˆ°æœ€åä¸€ä¸ªåˆ‡ç‰‡ä¹‹é—´å­˜åœ¨ä¸€å®šçš„æ—¶é—´å·®ï¼Œå¯¼è‡´é‡‡é›†åˆ°çš„æ•°æ®å¹¶ä¸æ˜¯åŒä¸€ä¸ªæ—¶é—´ç‚¹ã€‚\nè„šæœ¬ï¼š3dTshift\né…å‡†ä¸æ ‡å‡†åŒ– æ¯ä¸ªäººçš„å¤§è„‘å­˜åœ¨å·®å¼‚ï¼Œåœ¨è¿›è¡Œç»„åˆ†ææ—¶ï¼Œéœ€è¦å°†ä¸ªä½“çš„å¤§è„‘ä½“ç´ éƒ½å¯¹åº”åˆ°ç›¸åŒçš„å¤§è„‘æ¨¡æ¿ä¸Šå†è¿›è¡Œåˆ†æã€‚\nè„šæœ¬ï¼šalign_epi_anat.py\nå¯¹å‡†å’Œè¿åŠ¨æ ¡æ­£ åœ¨MRIæ‰«æè¿‡ç¨‹ä¸­ï¼Œè¢«è¯•å¤´éƒ¨å¯èƒ½å­˜åœ¨è½»å¾®æ‰°åŠ¨ï¼Œå¯¹äºæˆåƒç»“æœé€ æˆå¹²æ‰°ï¼Œæ•…æˆ‘ä»¬éœ€è¦å¯¹å¤´åŠ¨è¿›è¡Œæ ¡æ­£ã€‚\nåˆšä½“å˜æ¢ï¼šé‡‡ç”¨åˆšä½“å˜æ¢æ¥è§£å†³å¤´åŠ¨é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬è®¾å®šä¸€ä¸ªå‚è€ƒç‚¹ï¼Œç„¶åæ£€æµ‹åˆ°å—è¯•è€…çš„å¤´éƒ¨å‘å“ªä¸ªæ–¹å‘ç§»åŠ¨äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦å°†å›¾åƒçš„åˆ‡ç‰‡å‘ç›¸åçš„æ–¹å‘ç§»åŠ¨åŒæ ·çš„è·ç¦»å³å¯ï¼Œå½“ç„¶ï¼Œä¸åªæ˜¯å¹³ç§»ï¼ŒåŒ…æ‹¬æ—‹è½¬ç­‰ã€‚\nè„šæœ¬ï¼švolreg\nå¹³æ»‘ å¹³æ»‘å°±æ˜¯ç”¨å‘¨å›´ä½“ç´ çš„å¹³å‡å€¼ä»£æ›¿å½“å‰ä½“ç´ ï¼Œè¿™å¯¹ä½¿å¾—å›¾åƒå˜å¾—æ¨¡ç³Šï¼Œåˆ†è¾¨ç‡é™ä½ã€‚ä½†æ˜¯å¹³æ»‘å¯¹ä¸fMRIæ¥è¯´æ˜¯éå¸¸æœ‰æ•ˆçš„ï¼Œå› ä¸ºfMRIçš„å™ªéŸ³è¾ƒå¤§ï¼Œå¹³æ»‘åå¯ä»¥æ˜¾è‘—é™å™ªï¼ŒåŒæ—¶å¢å¼ºä¿¡å·ã€‚å¹³æ»‘æ ¸å‡½æ•°ä¸€èˆ¬åŒ…æ‹¬ä¸¤ä¸ªï¼š4mmå’Œ10mmï¼Œè¶Šå¤§çš„æ ¸å‡½æ•°å¹³æ»‘ç¨‹åº¦æ›´å¤§ï¼Œå½“ç„¶å›¾åƒåˆ†è¾¨ç‡ä¹Ÿè¶Šä½ã€‚\nè„šæœ¬ï¼šblur\nmaskå’Œä½“ç´ ç¼©æ”¾ mask è®¾ç½®ä¸€ä¸ªæ©è†œ(mask)åªæŠŠå¤´éƒ¨çº³å…¥è¿›æ¥ï¼Œå…¶ä½™éƒ¨åˆ†éƒ½å»æ‰ã€‚å»ç»“æ„åƒçš„maskï¼Œç„¶ååº”ç”¨åˆ°åŠŸèƒ½åƒä¸Šã€‚\nä½“ç´ ç¼©æ”¾ ä¸åŒå—è¯•è€…çš„å›¾åƒä¹‹é—´åƒç´ å¼ºåº¦å¯èƒ½å­˜åœ¨å·®å¼‚ï¼Œè¿™æ ·çš„åˆ†æç»“æœä¸ä¼šæœ‰ä»»ä½•æ„ä¹‰ï¼Œæ‰€æˆ‘æˆ‘ä»¬å°†æ¯ä¸ªä½“ç´ çš„æ—¶é—´åºåˆ—ç¼©æ”¾ä¸º100çš„å¹³å‡å€¼ï¼ˆèŒƒå›´0-200ï¼‰ã€‚\nè„šæœ¬ï¼š3dAutomask\næ£€æŸ¥é¢„å¤„ç†ç»“æœ æ•°æ®å‡†å¤‡ï¼š https://openneuro.org/datasets/ds000102/versions/00001\nå‚è€ƒèµ„æ–™ AFNIå®˜ç½‘æ–‡æ¡£ https://www.cnblogs.com/kongmaster/p/16635637.html "
},
{
	"uri": "https://LiaoPan.github.io/eeglab/",
	"title": "EEGLABç³»åˆ—æ•™ç¨‹",
	"tags": [],
	"description": "",
	"content": "æµ‹è¯•ä¸€ä¸‹\n"
},
{
	"uri": "https://LiaoPan.github.io/fieldtrip/",
	"title": "FieldTripç³»åˆ—æ•™ç¨‹",
	"tags": [],
	"description": "",
	"content": "æµ‹è¯•ä¸€ä¸‹\n"
},
{
	"uri": "https://LiaoPan.github.io/freesurfer/",
	"title": "FreeSurferç³»åˆ—æ•™ç¨‹",
	"tags": [],
	"description": "",
	"content": "ä»‹ç» FreeSurferæ˜¯ä¸€æ¬¾å…è´¹å¼€æºçš„ç”¨äºåˆ†æå’Œå¯è§†åŒ–æ¥è‡ªæ¨ªæ–­é¢å’Œçºµå‘ç ”ç©¶çš„ç¥ç»å½±åƒæ•°æ®è½¯ä»¶åŒ…ã€‚å®ƒç”± Martinos ç”Ÿç‰©åŒ»å­¦æˆåƒä¸­å¿ƒçš„è®¡ç®—ç¥ç»æˆåƒå®éªŒå®¤å¼€å‘ã€‚\nFreeSurfer ä¸ºç»“æ„åƒå’ŒåŠŸèƒ½åƒæä¾›å®Œæ•´çš„å¤„ç†æµï¼ŒåŒ…æ‹¬æä¾›çº¿æ€§å’Œéçº¿æ€§é…å‡†ã€çš®è´¨å’Œçš®è´¨ä¸‹åˆ†å‰²ã€çš®è´¨è¡¨é¢é‡å»ºã€ç»„å½¢æ€æµ‹é‡ç»Ÿè®¡åˆ†æã€æ‰©æ•£åƒã€PETåˆ†æç­‰çš„å·¥å…·ã€‚å®ƒä¹Ÿæ˜¯ Human Connectome Project çš„é¦–é€‰ç»“æ„åƒåˆ†æè½¯ä»¶ã€‚\næœ‰å…³ä½¿ç”¨å’Œç†è§£ FreeSurfer å·¥å…·çš„æ‰©å±•æ–‡æ¡£ï¼Œè¯·è®¿é—®FS Wikiã€‚\nFreeSurferèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ MRIçš„å›¾åƒåˆ†å‰²ã€é…å‡† é¢…éª¨å‰¥ç¦»ï¼ŒB1ååœºæ ¡æ­£ï¼Œç°ç™½è‰²è´¨åˆ†å‰² ä¸ªä½“çš®è´¨è¡¨é¢ä¸ç«‹ä½“å®šå‘å›¾è°±çš„éçº¿æ€§é…å‡† çš®è´¨è¡¨é¢é‡å»º è®¡ç®—çš®è´¨åšåº¦ã€æ›²ç‡ã€ç°è´¨ä½“ç§¯ç­‰ çš®å±‚è¡¨é¢åŒºåŸŸä»¥åŠçš®å±‚ä¸‹çš„å¤§è„‘ç»“æ„çš„æ ‡è®° ç»„é—´å·®å¼‚åˆ†æä»¥åŠå¯è§†åŒ– å‚è€ƒèµ„æ–™ å®˜ç½‘ Freesurferä½¿ç”¨æ‰‹å†Œ "
},
{
	"uri": "https://LiaoPan.github.io/mne/",
	"title": "MNEç³»åˆ—æ•™ç¨‹",
	"tags": [],
	"description": "",
	"content": "æ›´å¤šçš„MNEä½¿ç”¨æŠ€å·§å‚è€ƒ\n"
},
{
	"uri": "https://LiaoPan.github.io/spm/",
	"title": "SPMç³»åˆ—æ•™ç¨‹",
	"tags": [],
	"description": "",
	"content": "SPMä»‹ç» SPM(Statistical Parametric Mapping)åˆ†æåŠŸèƒ½æˆåƒæ•°æ®ä¸»æµçš„ä¸€ä¸ªå¼€æºè½¯ä»¶åŒ…ï¼Œå¯ä»¥åˆ†æå¤šç§è„‘æˆåƒæ•°æ®ï¼ŒåŒ…æ‹¬fMRIï¼ŒPETï¼ŒSPECTï¼ŒEEGå’ŒMEGã€‚ SPMè½¯ä»¶åŒ…ä¸“ä¸ºåˆ†æè„‘æˆåƒæ•°æ®åºåˆ—è€Œè®¾è®¡ï¼Œè¿™äº›åºåˆ—åŒ…æ‹¬ä¸åŒé˜Ÿåˆ—ï¼ˆcohortsï¼‰çš„ä¸€ç³»åˆ—å›¾åƒæˆ–è€…åŒä¸€ä¸ªè¢«è¯•çš„æ—¶é—´åºåˆ—ã€‚\nä¸­æ–‡ç‰ˆSPMåˆå­¦è€…æ•™ç¨‹ åŸç‰ˆSPM12 Starter\u0026rsquo;s GUIDE\nhttps://jsheunis.github.io/2018-06-28-spm12-matlab-scripting-tutorial-4/ æ±‡æ€»\n"
},
{
	"uri": "https://LiaoPan.github.io/ants/",
	"title": "ANTsç³»åˆ—æ•™ç¨‹",
	"tags": [],
	"description": "",
	"content": " ä¸‹è½½ANTså·¥å…·ç®± å®‰è£…ANTså·¥å…·ç®± è®¾ç½®ç¯å¢ƒå˜é‡PATHã€ANTSPATH ä¸‹è½½ANTså·¥å…·ç®± ç‚¹å‡»ä¸‹è½½é“¾æ¥ï¼Œé€‰æ‹©æƒ³è¦çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ã€‚ Macç¯å¢ƒä¸‹ï¼Œç­‰å¾…ä¸‹è½½å®Œæˆåï¼Œè§£å‹åˆ°ç‰¹å®šæ–‡ä»¶ä¸‹/opt/ants-\u0026lt;version\u0026gt;/[bin,lib]ï¼Œ\nå®‰è£…ANTså·¥å…·ç®± è®¾ç½®ç¯å¢ƒå˜é‡PATHã€ANTSPATH åœ¨Macç¯å¢ƒä¸‹ï¼Œæ‰“å¼€~/.bash_profileæ–‡ä»¶,å†™å…¥ä¸‹è¿°å†…å®¹ï¼š\n# ANTs export ANTSPATH=/opt/ants-2.4.4/bin/ export PATH=${ANTSPATH}:$PATH ç„¶åï¼Œsource ~/.bash_profileæ¥æ¿€æ´»ç¯å¢ƒå˜é‡ã€‚ æœ€åï¼Œæˆ‘ä»¬æ¥æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸã€‚\n# åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œä¼šè¾“å‡ºantsRegistrationçš„å¯¹åº”è·¯å¾„ $ which antsRegistration /opt/ants-2.4.4/bin//antsRegistration # åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œä¼šè¾“å‡ºantsRegistrationSyN.shçš„ä½¿ç”¨æ–¹æ³• $ antsRegistrationSyN.sh Usage: antsRegistrationSyN.sh -d ImageDimension -f FixedImage -m MovingImage -o OutputPrefix Example Case: antsRegistrationSyN.sh -d 3 -f fixedImage.nii.gz -m movingImage.nii.gz -o output Compulsory arguments: -d: ImageDimension: 2 or 3 (for 2 or 3 dimensional registration of single volume) -f: Fixed image(s) or source image(s) or reference image(s) ... è‹¥åœ¨macç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ANTså‘½ä»¤æ—¶ï¼Œå‡ºç°ä»¥ä¸‹é—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦ç»™æ‰€æœ‰ç›¸å…³äºŒè¿›åˆ¶æ–‡ä»¶æˆæƒã€‚ æˆæƒæ–¹å¼å¦‚ä¸‹ï¼š\n$ xattr -r -d com.apple.quarantine \u0026lt;æŒ‡å®šæˆæƒæ–‡ä»¶å¤¹\u0026gt; $ xattr -r -d com.apple.quarantine /opt/ants-2.4.4/ https://github.com/ANTsX/ANTsPy https://github.com/ANTsX/ANTs\nhttps://github.com/ANTsX/ANTs/wiki/Installing-ANTs-release-binaries https://andysbrainbook.readthedocs.io/en/latest/ANTs/ANTs_Overview.html?highlight=ants\n"
},
{
	"uri": "https://LiaoPan.github.io/freesurfer/practice/",
	"title": "FreeSurferæ•™ç¨‹ #N. å®è·µæ•™ç¨‹ä¹‹CookBook",
	"tags": [],
	"description": "",
	"content": " å®è·µ#1:å¦‚ä½•å°†ä¸€ä¸ªä¸ªä½“subjectæ˜ å°„åˆ°fsaverageï¼Ÿ å®è·µ2:å¦‚ä½•æå–statsæ–‡ä»¶å¤¹å†…çš„ç»Ÿè®¡ä¿¡æ¯ï¼Ÿ å®è·µ#3:å¦‚ä½•æå–æ„Ÿå…´è¶£ROIåŒºåŸŸçš„ç»“æ„ä¿¡æ¯ï¼Ÿ å®è·µ#4:å¦‚æœæ„å»ºä¸€ä¸ªsurface ROIé‡é‡‡æ ·åˆ°ä½“ç§¯ï¼ˆVolumeï¼‰ï¼Ÿ å®è·µ#5:å¦‚ä½•ä½¿ç”¨FreeSurferå»é™¤é¢…éª¨(skull-stripping)? å®è·µ#1:å¦‚ä½•å°†ä¸€ä¸ªä¸ªä½“subjectæ˜ å°„åˆ°fsaverageï¼Ÿ å¦‚ä½•æŒ‰è‡ªå®šä¹‰æ¨¡æ¿ï¼Œé‡å»ºçš®å±‚ï¼Œå¹¶æå–çš®å±‚ä¿¡æ¯ï¼Ÿ\nå®è·µ2:å¦‚ä½•æå–statsæ–‡ä»¶å¤¹å†…çš„ç»Ÿè®¡ä¿¡æ¯ï¼Ÿ æ–¹æ³•: ä½¿ç”¨asegstats2tableå’Œaparcstats2tableå‘½ä»¤æ¥æå– $ asegstats2table --subject \u0026lt;\u0026gt; --common-segs --meas \u0026lt;volume,mean,std\u0026gt; --stats=\u0026lt;stats file\u0026gt; --table=\u0026lt;extracted measurement to a text file\u0026gt; $ asegstats2table --subjects sub-101 sub-103 --common-segs --meas volume --stats=aseg.stats --table=segstats.txt --subjectsé€‰é¡¹æŒ‡å®šäº†ä¸€ä¸ªè¢«è¯•åç§°çš„åˆ—è¡¨ã€‚ --common-segsè¡¨ç¤ºè¾“å‡ºæ‰€æœ‰è¢«è¯•å…±æœ‰çš„åˆ†æ®µï¼Œæ¢å¥è¯è¯´ï¼Œå¦‚æœä¸€ä¸ªå—è¯•è€…çš„åˆ†æ®µæ•°ä¸å…¶ä»–å—è¯•è€…ä¸åŒï¼Œä¸è¦ä»¥é”™è¯¯é€€å‡ºå‘½ä»¤ã€‚ --measè¡¨ç¤ºè¦ä»è¡¨ä¸­æå–å“ªç§ç»“æ„æµ‹é‡å€¼ï¼ˆ\u0026ldquo;volume \u0026ldquo;æ˜¯é»˜è®¤å€¼ï¼›æ›¿ä»£å€¼æ˜¯ \u0026ldquo;mean \u0026ldquo;å’Œ \u0026ldquo;std\u0026rdquo;ï¼‰ã€‚ --statsæŒ‡çš„æ˜¯å°†ä»åˆ†æ®µæ•°æ®ä¸­æå–çš„ç»Ÿè®¡æ–‡ä»¶ï¼› --tableå°†æå–çš„æµ‹é‡æ•°æ®å†™å…¥ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼ŒæŒ‰è¢«è¯•åç§°ç»„ç»‡ã€‚\nåŒç†ï¼Œaparcstats2tableä¹Ÿç±»ä¼¼ï¼Œ\n$ aparcstats2table --subjects sub-101 sub-103 --hemi lh --meas thickness --parc=aparc --tablefile=aparc.txt --hemi,æŒ‡å®šè¦åˆ†æçš„åŠçƒ --meas,è¦æå–çš„æµ‹é‡å€¼,é€‰é¡¹æœ‰\u0026quot;thickness\u0026rdquo;, \u0026ldquo;volume\u0026rdquo;, \u0026ldquo;area\u0026rdquo;, \u0026ldquo;meancurv\u0026rdquo; --parc,æŒ‡å®šå›¾è°±ï¼Œé€‰é¡¹æœ‰Desikan-Killinayå›¾è°±(\u0026ldquo;aparc\u0026rdquo;)å’ŒDestrieuxå›¾è°±(\u0026ldquo;aparc.a2009s\u0026rdquo;)\nå®è·µ#3:å¦‚ä½•æå–æ„Ÿå…´è¶£ROIåŒºåŸŸçš„ç»“æ„ä¿¡æ¯ï¼Ÿ å¦‚ä½•å°†ä¸€ä¸ªVolumetric ROIé‡é‡‡æ ·åˆ°è¡¨é¢ï¼Œç„¶åä»è¯¥ROIä¸­æå–ç»“æ„æµ‹é‡å€¼ã€‚ å¦‚ä½•å°†ROIåŒºåŸŸæ˜ å°„åˆ°çš®å±‚ä¸Š shell #!/bin/tcsh setenv SUBJECTS_DIR `pwd` # ä½¿ç”¨AFNIçš„3dUndumpåˆ›å»º5mmçš„ROIçƒä½“;ROI_file.txt åŒ…å«çƒå¿ƒçš„ xã€y å’Œ z åæ ‡ # https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dUndump.html 3dUndump -srad 5 -prefix S2.nii -master MNI_caez*+tlrc.HEAD -orient LPI -xyz ROI_file.txt # ä½¿ç”¨tkmeditæŸ¥çœ‹ # https://surfer.nmr.mgh.harvard.edu/fswiki/FsTutorial/TkmeditGeneralUsage tkmedit -f MNI_caez_N27.nii -overlay S2.nii -fthresh 0.5 # å°†ç»“æ„åƒæ¨¡æ¿é…å‡†åˆ°fsaverage fslregister --s fsaverage --mov MNI_caez_N27.nii --reg tmp.dat # åœ¨fsaverageä¸ŠæŸ¥çœ‹ROI tkmedit fsaverage T1.mgz -overlay S2.nii -overlay-reg tmp.dat -fthresh 0.5 -surface lh.white -aux-surface rh.white #å°†ROIæ˜ å°„åˆ°fsaverageçš®å±‚; #https://surfer.nmr.mgh.harvard.edu/fswiki/mri_vol2surf mri_vol2surf --mov S2.nii \\ --reg tmp.dat \\ --projdist-max 0 1 0.1 \\ --interp nearest \\ --hemi lh \\ --out lh.fsaverage.S2.mgh \\ --noreshape # æ£€æŸ¥ROIæ˜ å°„åˆ°è†¨èƒ€çš®å±‚çš„æƒ…å†µ # https://surfer.nmr.mgh.harvard.edu/fswiki/tksurfer tksurfer fsaverage lh inflated -overlay lh.fsaverage.S2.mgh -fthresh 0.5 å®è·µ#4:å¦‚æœæ„å»ºä¸€ä¸ªsurface ROIé‡é‡‡æ ·åˆ°ä½“ç§¯ï¼ˆVolumeï¼‰ï¼Ÿ å°†ä¸€ä¸ªç”±FreeSurferåˆ›å»ºçš„ROIæŠ•å°„åˆ°ä¸ªä½“ä½“ç§¯ç©ºé—´ã€‚\næ ¹æ®labelä¿¡æ¯ï¼Œç”ŸæˆROI Volumeã€‚ shell # æ‰‹åŠ¨åˆ›å»ºregistration fileï¼ˆregister.datï¼‰ # https://surfer.nmr.mgh.harvard.edu/fswiki/FsTutorial/ManualRegistration # å»æ‰--noeditå‚æ•°ï¼Œå¯ä»¥å¼¹å‡ºGUIç•Œé¢æ¥æ‰‹åŠ¨è°ƒæ•´ï¼›â€œbeta_0001.niiâ€ is a beta map created in the subjectâ€™s native space tkregister2 --mov beta_0001.nii --s subject --noedit --regheader --reg register.dat # ä½¿ç”¨mri_label2volå‘½ä»¤å°†surface ROIè½¬åˆ°ä½“ç§¯ç©ºé—´ã€‚ # mri_label2vol: creates mgz volume from a label or set of labels # --temp: Template volume # --fillthresh: Relative threshold which the number hits in a voxel must exceed for the voxel to be considered a candidate for membership in the label. (See mri_label2vol --help for more information) # --proj: Project the label along the surface normal # https://surfer.nmr.mgh.harvard.edu/fswiki/mri_label2vol mri_label2vol --label lh.superiortemporal.label --temp beta_0001.nii --subject subject --hemi lh --fillthresh .9 --proj frac 0 1 .1 --reg register.dat --o $PWD/stgnew.nii mri_label2volè¿è¡Œå®Œæˆä¹‹åï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªæ–°æ–‡ä»¶stgnew.niï¼Œå®ƒæ˜¯è½¬æ¢ä¸ºä½“ç§¯ç©ºé—´çš„è¡¨é¢ROIã€‚\nå®è·µ#5:å¦‚ä½•ä½¿ç”¨FreeSurferå»é™¤é¢…éª¨(skull-stripping)? shell # é€šè¿‡è®¾ç½®è¾ƒä½çš„åˆ†æ°´å²­é˜ˆå€¼ï¼ˆä¾‹å¦‚ 5ï¼‰æ¥å»é™¤æ›´å¤šçš„å¤´éª¨,ä¼šç”Ÿæˆé¢…éª¨å»é™¤çš„æ©ç æ–‡ä»¶brainmask.mgzã€‚ recon-all -skullstrip -wsthresh 5 -clean-bm -s sub-117_ses-BL_T1w # å³ä½¿åˆ†æ°´å²­é˜ˆå€¼è¾ƒä½ï¼Œä»æœ‰ä¸€äº›å¤´éª¨(skull)å’Œç¡¬è„‘è†œ(dura)çš„ç¢ç‰‡æ®‹ç•™ã€‚ä½ å¯ä»¥ä½¿ç”¨-gcuté€‰é¡¹æ¥åˆ é™¤åè€… recon-all -skullstrip -clean-bm -gcut -subjid sub-117_ses-BL_T1w åœ¨ä½ ä½¿ç”¨watershedçš„gcuté€‰é¡¹åï¼Œéœ€è¦ç”¨ä»¥ä¸‹ä»£ç é‡æ–°ç”Ÿæˆçš®å±‚è¡¨é¢ã€‚ recon-all -autorecon2-pial -subjid \u0026lt;subject name\u0026gt;\nå‚æ•°è§£æï¼š\n-subjid subjid:the subject data upon which to operate autorecon2-pial:process stages 21-23 https://surfer.nmr.mgh.harvard.edu/fswiki/recon-all æ‰©å±• å¯ä»¥ä½¿ç”¨FSLä¸‹çš„bet2å·¥å…·æ¥å®Œæˆé¢…éª¨å»é™¤(å¾ˆå¸¸ç”¨)ã€‚\nå‚è€ƒæ•™ç¨‹\n"
},
{
	"uri": "https://LiaoPan.github.io/",
	"title": "ä¸»é¡µ",
	"tags": [],
	"description": "",
	"content": "æ•™ç¨‹\u0026amp;å­¦ä¹ å†…å®¹ æœ¬åšå®¢æ˜¯åšä¸»è¾¹å­¦ä¹ ç›¸å…³çŸ¥è¯†è¾¹è®°å½•çš„ç›¸å…³æ•™ç¨‹å®è·µï¼Œä»¥ä½œå¤‡å¿˜å’Œåˆ†äº«ã€‚ åšä¸»åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œéš¾å…ä¼šå‡ºç°é”™æ¼æˆ–è€…ç†è§£ä¸å¯¹çš„åœ°æ–¹ï¼Œè¯·å¤§å®¶è¾©è¯çœ‹å¾…ã€è°¨æ…ä½¿ç”¨ã€‚\nå› ä¸ºåœ¨å›½å†…è®¿é—®githubç½‘ç«™æ—¶å¶å°”ä¼šå‡ºç°è®¿é—®ç¼“æ…¢æˆ–è€…æ— æ³•è®¿é—®æƒ…å†µï¼Œæ‰€ä»¥æˆ‘åœ¨giteeä¹Ÿæ­å»ºäº†ç›¸åŒåšå®¢ç½‘ç«™ï¼Œä¾›å¤§å®¶è®¿é—®ã€‚ https://panliao.gitee.io/ ï¼ˆå›½å†…è®¿é—®ï¼Œæ›´åŠ ç¨³å®šï¼‰\nåŸºç¡€çŸ¥è¯† è„‘ç›¸å…³æ•°æ®é›† DIPYç³»åˆ—æ•™ç¨‹ å¿«é€Ÿå…¥é—¨ çº¤ç»´æŸè¿½è¸ªå…¥é—¨ MRtrix3ç³»åˆ—æ•™ç¨‹ MRtrix3æ•™ç¨‹ #1 å¿«é€Ÿå…¥é—¨ MRtrix3æ•™ç¨‹ #2 é¢„å¤„ç† AFNIç³»åˆ—æ•™ç¨‹ EEGLABç³»åˆ—æ•™ç¨‹ FieldTripç³»åˆ—æ•™ç¨‹ FreeSurferç³»åˆ—æ•™ç¨‹ FreeSurferæ•™ç¨‹ #1. å®‰è£… FreeSurferæ•™ç¨‹ #2. FreeSurferè¾“å‡ºç»“æœä¸FreeViewå¯è§†åŒ– FreeSurferæ•™ç¨‹ #N. å®è·µæ•™ç¨‹ä¹‹CookBook MNEç³»åˆ—æ•™ç¨‹ SPMç³»åˆ—æ•™ç¨‹ ANTsç³»åˆ—æ•™ç¨‹ å¦‚æœæˆ‘ä»¬æƒ³æ·±å…¥äº†è§£MRIç›¸å…³çŸ¥è¯†ï¼Œæ¨èæŸ¥çœ‹ Functional Magnetic Resonance Imaging, by Huettel, Song, \u0026amp; McCarthy (3rd Edition)\næˆ–è€…è®¿é—®https://mriquestions.com/index.htmlç½‘ç«™äº†è§£\n"
},
{
	"uri": "https://LiaoPan.github.io/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://LiaoPan.github.io/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]